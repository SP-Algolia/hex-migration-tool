schemaVersion: 3
meta:
  sourceVersionId: 0198f5b8-4596-7997-b207-79fced51f9d0 # DO NOT CHANGE - Hex uses this to match up project versions when reimporting the file
  description: null
  projectId: 2caaf246-bb7f-4781-8b22-19b2404094e3 # DO NOT CHANGE - Unique ID of the project from which this file was generated
  title: Search Usage Analytics
  timezone: null
  appTheme: SYS_PREF
  codeLanguage: PYTHON
  status: null
  categories: []
  castDecimalsDefault: true
  logicQueryCacheTimeout:
    type: fixed
    unit: days
    duration: 60
  publishedQueryCacheTimeout: null
  hexType: PROJECT
  allowExecutionReordering: true
  prerunApp: false
  cachePublishedAppState: true
  refreshStalePublishedApp: false
  autoRerunApp: true
projectAssets:
  dataConnections: []
  envVars: []
  secrets: []
sharedAssets:
  secrets: []
  vcsPackages: []
  dataConnections:
    - dataConnectionId: 202eaaa9-a0d5-49cf-91f7-7df0d335c04d # BigQuery - alg-analytics (not owned by data teams) (bigquery)
    - dataConnectionId: 63ebcea0-017f-4bcf-b58a-a2340a75845f # Redshift (with external tables) (redshift)
    - dataConnectionId: e2694948-2c20-47d3-b127-71448e2bf238 # Redshift (with raw tables) (redshift)
  externalFileIntegrations: []
cells:
  - cellType: SQL
    cellId: a0f2d6ca-44c8-41dc-9fe5-07517148b73a # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: week on week
    config:
      source: |
        SELECT 
            EXTRACT(WEEK FROM date) AS week_number,

            SUM(CASE WHEN EXTRACT(YEAR FROM date) = 2023 THEN total_search_requests ELSE 0 END) AS usage_2023,
            SUM(CASE WHEN EXTRACT(YEAR FROM date) = 2023 THEN total_search_operations ELSE 0 END) AS usage_ops_2023,
            SUM(CASE WHEN EXTRACT(YEAR FROM date) = 2023 THEN querysuggestions_total_search_operations END) AS query_suggestions_operations_2023,
           SUM(CASE WHEN EXTRACT(YEAR FROM date) = 2023 THEN total_rules_operations END) as total_rules_operations_2023,
           SUM(CASE WHEN EXTRACT(YEAR FROM date) = 2023 THEN search_rules_operations END) as search_rules_operations_2023,


            SUM(CASE WHEN EXTRACT(YEAR FROM date) = 2024 THEN total_search_requests ELSE 0 END) AS usage_2024,
            SUM(CASE WHEN EXTRACT(YEAR FROM date) = 2024 THEN total_search_operations ELSE 0 END) AS usage_ops_2024,
            SUM(CASE WHEN EXTRACT(YEAR FROM date) = 2024 THEN querysuggestions_total_search_operations END) AS query_suggestions_operations_2024,
           SUM(CASE WHEN EXTRACT(YEAR FROM date) = 2024 THEN total_rules_operations END) as total_rules_operations_2024,
           SUM(CASE WHEN EXTRACT(YEAR FROM date) = 2024 THEN search_rules_operations END) as search_rules_operations_2024,


            SUM(CASE WHEN EXTRACT(YEAR FROM date) = 2025 THEN total_search_requests ELSE 0 END) AS usage_2025,
            SUM(CASE WHEN EXTRACT(YEAR FROM date) = 2025 THEN total_search_operations ELSE 0 END) AS usage_ops_2025,
            SUM(CASE WHEN EXTRACT(YEAR FROM date) = 2025 THEN querysuggestions_total_search_operations END) AS query_suggestions_operations_2025,
           SUM(CASE WHEN EXTRACT(YEAR FROM date) = 2025 THEN total_rules_operations END) as total_rules_operations_2025,
           SUM(CASE WHEN EXTRACT(YEAR FROM date) = 2025 THEN search_rules_operations END) as search_rules_operations_2025
            
        FROM 
            prod_usages.daily_per_application
        WHERE 
            EXTRACT(YEAR FROM date) IN ( 2023, 2024 , 2025)
        GROUP BY 
            week_number
        ORDER BY 
            week_number;
      dataFrameCell: false
      dataConnectionId: e2694948-2c20-47d3-b127-71448e2bf238
      resultVariableName: week_on_week_usage
      useRichDisplay: true
      sqlCellOutputType: PANDAS
      useQueryMode: false
      castDecimals: true
      useNativeDates: true
      outputFilteredResult: true
      allowDuplicateColumns: false
      tableDisplayConfig:
        pageSize: 50
        height: null
        hideIcons: false
        defaultColumnWidth: null
        hideIndex: false
        defaultSortColumn: null
        defaultSortIndexColumn: null
        defaultSortDirection: ASC
        conditionalFormatting: null
        calcs: null
        filters: null
        columnProperties:
          - originalName: query_suggestions_operations_2022
            renameTo: null
            size: 254
            wrapText: null
            displayFormat: null
          - originalName: query_suggestions_operations_2023
            renameTo: null
            size: 254
            wrapText: null
            displayFormat: null
          - originalName: query_suggestions_operations_2024
            renameTo: null
            size: 396
            wrapText: null
            displayFormat: null
          - originalName: query_suggestions_req_2022
            renameTo: null
            size: 215
            wrapText: null
            displayFormat: null
          - originalName: query_suggestions_req_2023
            renameTo: null
            size: 215
            wrapText: null
            displayFormat: null
          - originalName: row-index-0
            renameTo: null
            size: 46
            wrapText: null
            displayFormat: null
          - originalName: search_rules_operations_2022
            renameTo: null
            size: 223
            wrapText: null
            displayFormat: null
          - originalName: search_rules_operations_2023
            renameTo: null
            size: 336
            wrapText: null
            displayFormat: null
          - originalName: search_rules_operations_2024
            renameTo: null
            size: 336
            wrapText: null
            displayFormat: null
          - originalName: total_rules_operations_2022
            renameTo: null
            size: 212
            wrapText: null
            displayFormat: null
          - originalName: total_rules_operations_2023
            renameTo: null
            size: 212
            wrapText: null
            displayFormat: null
          - originalName: total_rules_operations_2024
            renameTo: null
            size: 324
            wrapText: null
            displayFormat: null
          - originalName: usage_2022
            renameTo: null
            size: 122
            wrapText: null
            displayFormat: null
          - originalName: usage_2023
            renameTo: null
            size: 122
            wrapText: null
            displayFormat: null
          - originalName: usage_2024
            renameTo: null
            size: 120
            wrapText: null
            displayFormat: null
          - originalName: usage_ops_2022
            renameTo: null
            size: 147
            wrapText: null
            displayFormat: null
          - originalName: usage_ops_2023
            renameTo: null
            size: 147
            wrapText: null
            displayFormat: null
          - originalName: usage_ops_2024
            renameTo: null
            size: 168
            wrapText: null
            displayFormat: null
          - originalName: week_number
            renameTo: null
            size: 132
            wrapText: null
            displayFormat: null
        columnOrdering: null
        customColumnOrdering: null
        pinnedColumns: null
        hiddenColumns: null
        pinIndexColumns: false
        showAggregations: false
        columnAggregations: null
  - cellType: CHARTV2
    cellId: 05cfc9ab-99e2-486f-8302-ce6857c00ba4 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      height: null
      chartSpec:
        type: layered
        layers:
          - id: 88542ede-c1c4-4a2d-b2e9-a6e34a613cb2
            xAxis:
              type: number
              style:
                grid:
                  style: solid
                ticks: {}
                labels: {}
              dataFrameColumn: week_number
            series:
              - id: 58a6cc12-91ec-4a40-b4dc-760511233ace
                type: line
                axis:
                  type: number
                  style:
                    grid:
                      style: solid
                    ticks: {}
                    labels: {}
                dataFrameColumns:
                  - usage_2025
                colorOrder: ascending
                color:
                  type: static
                opacity:
                  type: static
                  value: 1
                tooltip:
                  type: auto
                point: false
                stroke: solid
              - id: 01d1d58f-84c8-4f1f-bb76-a3dbd6b95ede
                type: line
                axis:
                  type: number
                  style:
                    grid:
                      style: solid
                    ticks: {}
                    labels: {}
                dataFrameColumns:
                  - usage_2023
                colorOrder: ascending
                color:
                  type: static
                  color: "#00B928"
                opacity:
                  type: static
                  value: 1
                tooltip:
                  type: auto
                point: false
                stroke: solid
              - id: a12c65b2-7218-4eaa-b6e7-fd77e67e7589
                type: line
                axis:
                  type: number
                  style:
                    grid:
                      style: solid
                    ticks: {}
                    labels: {}
                dataFrameColumns:
                  - usage_2024
                colorOrder: ascending
                color:
                  type: static
                  color: "#D4142A"
                opacity:
                  type: static
                  value: 1
                tooltip:
                  type: auto
                point: false
                stroke: solid
            dataFrame: week_on_week_usage
            seriesGroups:
              - - 58a6cc12-91ec-4a40-b4dc-760511233ace
                - 01d1d58f-84c8-4f1f-bb76-a3dbd6b95ede
                - a12c65b2-7218-4eaa-b6e7-fd77e67e7589
        settings:
          legend:
            position: right
          tooltip: true
          selectionEnabled: false
      chartSelection: {}
      colorMappings: {}
      resultVariable: filter_result_10
      outputResult: false
      displayType: CHART
      displayTableConfig: null
  - cellType: SQL
    cellId: a6b74982-f2f5-49da-870f-e2eedda4de07 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: month on month
    config:
      source: |
        SELECT 
            EXTRACT(MONTH FROM date) AS month_number,
            SUM(CASE WHEN EXTRACT(YEAR FROM date) = 2025 THEN total_search_requests ELSE 0 END) AS usage_2025,
            SUM(CASE WHEN EXTRACT(YEAR FROM date) = 2023 THEN total_search_requests ELSE 0 END) AS usage_2023,
              SUM(CASE WHEN EXTRACT(YEAR FROM date) = 2025 THEN total_search_operations ELSE 0 END) AS usage_ops_2025,
            SUM(CASE WHEN EXTRACT(YEAR FROM date) = 2023 THEN total_search_operations ELSE 0 END) AS usage_ops_2023,
            SUM( CASE WHEN EXTRACT(YEAR FROM date) = 2025 THEN querysuggestions_total_search_operations END) AS query_suggestions_operations_2025,
           SUM(CASE WHEN EXTRACT(YEAR FROM date) = 2025 THEN total_rules_operations END) as total_rules_operations_2025,
           SUM(CASE WHEN EXTRACT(YEAR FROM date) = 2025 THEN search_rules_operations END) as search_rules_operations_2025,
            SUM(CASE WHEN EXTRACT(YEAR FROM date) = 2023 THEN querysuggestions_total_search_operations END) AS query_suggestions_operations_2023,
           SUM(CASE WHEN EXTRACT(YEAR FROM date) = 2023 THEN total_rules_operations END) as total_rules_operations_2023,
           SUM(CASE WHEN EXTRACT(YEAR FROM date) = 2023 THEN search_rules_operations END) as search_rules_operations_2023,
               SUM(CASE WHEN EXTRACT(YEAR FROM date) = 2024 THEN total_search_requests ELSE 0 END) AS usage_2024,
            SUM(CASE WHEN EXTRACT(YEAR FROM date) = 2024 THEN total_search_operations ELSE 0 END) AS usage_ops_2024,
            SUM(CASE WHEN EXTRACT(YEAR FROM date) = 2024 THEN querysuggestions_total_search_operations END) AS query_suggestions_operations_2024,
           SUM(CASE WHEN EXTRACT(YEAR FROM date) = 2024 THEN total_rules_operations END) as total_rules_operations_2024,
           SUM(CASE WHEN EXTRACT(YEAR FROM date) = 2024 THEN search_rules_operations END) as search_rules_operations_2024
        FROM 
            prod_usages.daily_per_application
        WHERE 
            EXTRACT(YEAR FROM date) IN (2025, 2023, 2024)
        GROUP BY 
            month_number
        ORDER BY 
            month_number;
      dataFrameCell: false
      dataConnectionId: e2694948-2c20-47d3-b127-71448e2bf238
      resultVariableName: month_on_month_usage
      useRichDisplay: true
      sqlCellOutputType: PANDAS
      useQueryMode: false
      castDecimals: true
      useNativeDates: true
      outputFilteredResult: true
      allowDuplicateColumns: false
      tableDisplayConfig:
        pageSize: 50
        height: null
        hideIcons: false
        defaultColumnWidth: null
        hideIndex: false
        defaultSortColumn: null
        defaultSortIndexColumn: null
        defaultSortDirection: ASC
        conditionalFormatting: null
        calcs: null
        filters: null
        columnProperties:
          - originalName: month_number
            renameTo: null
            size: 139
            wrapText: null
            displayFormat: null
          - originalName: query_suggestions_operations_2022
            renameTo: null
            size: 254
            wrapText: null
            displayFormat: null
          - originalName: query_suggestions_operations_2023
            renameTo: null
            size: 396
            wrapText: null
            displayFormat: null
          - originalName: query_suggestions_operations_2024
            renameTo: null
            size: 396
            wrapText: null
            displayFormat: null
          - originalName: query_suggestions_operations_2025
            renameTo: null
            size: 330
            wrapText: null
            displayFormat: null
          - originalName: row-index-0
            renameTo: null
            size: 46
            wrapText: null
            displayFormat: null
          - originalName: search_rules_operations_2022
            renameTo: null
            size: 223
            wrapText: null
            displayFormat: null
          - originalName: search_rules_operations_2023
            renameTo: null
            size: 336
            wrapText: null
            displayFormat: null
          - originalName: search_rules_operations_2025
            renameTo: null
            size: 280
            wrapText: null
            displayFormat: null
          - originalName: total_rules_operations_2022
            renameTo: null
            size: 212
            wrapText: null
            displayFormat: null
          - originalName: total_rules_operations_2023
            renameTo: null
            size: 324
            wrapText: null
            displayFormat: null
          - originalName: total_rules_operations_2024
            renameTo: null
            size: 324
            wrapText: null
            displayFormat: null
          - originalName: total_rules_operations_2025
            renameTo: null
            size: 270
            wrapText: null
            displayFormat: null
          - originalName: usage_2022
            renameTo: null
            size: 122
            wrapText: null
            displayFormat: null
          - originalName: usage_2023
            renameTo: null
            size: 122
            wrapText: null
            displayFormat: null
          - originalName: usage_2024
            renameTo: null
            size: 120
            wrapText: null
            displayFormat: null
          - originalName: usage_2025
            renameTo: null
            size: 120
            wrapText: null
            displayFormat: null
          - originalName: usage_ops_2022
            renameTo: null
            size: 147
            wrapText: null
            displayFormat: null
          - originalName: usage_ops_2023
            renameTo: null
            size: 147
            wrapText: null
            displayFormat: null
          - originalName: usage_ops_2024
            renameTo: null
            size: 168
            wrapText: null
            displayFormat: null
          - originalName: usage_ops_2025
            renameTo: null
            size: 140
            wrapText: null
            displayFormat: null
        columnOrdering: null
        customColumnOrdering: null
        pinnedColumns: null
        hiddenColumns: null
        pinIndexColumns: false
        showAggregations: false
        columnAggregations: null
  - cellType: CHARTV2
    cellId: db663b55-18f4-4441-b9a6-d6d9bdb092b7 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      height: null
      chartSpec:
        type: layered
        layers:
          - id: 8b17acd7-7e90-4056-8112-c922f0b92c98
            xAxis:
              type: number
              style:
                grid:
                  style: solid
                ticks: {}
                labels: {}
              dataFrameColumn: month_number
            series:
              - id: f632d0c0-0a33-4e4a-a417-e7a26e33eef5
                type: line
                axis:
                  type: number
                  style:
                    grid:
                      style: solid
                    ticks: {}
                    labels: {}
                dataFrameColumns:
                  - usage_2025
                colorOrder: ascending
                color:
                  type: static
                opacity:
                  type: static
                  value: 1
                tooltip:
                  type: auto
                point: false
                stroke: solid
              - id: 3c3fb625-37c1-4c45-9dd3-8424153ca2a2
                type: line
                axis:
                  type: number
                  style:
                    grid:
                      style: solid
                    ticks: {}
                    labels: {}
                dataFrameColumns:
                  - usage_2023
                colorOrder: ascending
                color:
                  type: static
                  color: "#00B928"
                opacity:
                  type: static
                  value: 1
                tooltip:
                  type: auto
                point: false
                stroke: solid
              - id: b728c418-57df-493c-9e6d-acdae7e60b9f
                type: line
                axis:
                  type: number
                  style:
                    grid:
                      style: solid
                    ticks: {}
                    labels: {}
                dataFrameColumns:
                  - usage_2024
                colorOrder: ascending
                color:
                  type: static
                  color: "#D4142A"
                opacity:
                  type: static
                  value: 1
                tooltip:
                  type: auto
                point: false
                stroke: solid
            dataFrame: month_on_month_usage
            seriesGroups:
              - - f632d0c0-0a33-4e4a-a417-e7a26e33eef5
                - 3c3fb625-37c1-4c45-9dd3-8424153ca2a2
                - b728c418-57df-493c-9e6d-acdae7e60b9f
        settings:
          legend:
            position: right
          tooltip: true
          selectionEnabled: false
      chartSelection: {}
      colorMappings: {}
      resultVariable: filter_result_11
      outputResult: false
      displayType: CHART
      displayTableConfig: null
  - cellType: SQL
    cellId: 7d3995c7-60cd-4a85-9413-d4accc87d231 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: Quarter on Quarter
    config:
      source: |
        SELECT 
            EXTRACT(QUARTER FROM date) AS quarter_number,
               SUM(CASE WHEN EXTRACT(YEAR FROM date) = 2025 THEN total_search_requests ELSE 0 END) AS usage_2025,
            SUM(CASE WHEN EXTRACT(YEAR FROM date) = 2023 THEN total_search_requests ELSE 0 END) AS usage_2023,
              SUM(CASE WHEN EXTRACT(YEAR FROM date) = 2025 THEN total_search_operations ELSE 0 END) AS usage_ops_2025,
            SUM(CASE WHEN EXTRACT(YEAR FROM date) = 2023 THEN total_search_operations ELSE 0 END) AS usage_ops_2023,
            SUM( CASE WHEN EXTRACT(YEAR FROM date) = 2025 THEN querysuggestions_total_search_operations END) AS query_suggestions_operations_2025,
           SUM(CASE WHEN EXTRACT(YEAR FROM date) = 2025 THEN total_rules_operations END) as total_rules_operations_2025,
           SUM(CASE WHEN EXTRACT(YEAR FROM date) = 2025 THEN search_rules_operations END) as search_rules_operations_2025,
            SUM(CASE WHEN EXTRACT(YEAR FROM date) = 2023 THEN querysuggestions_total_search_operations END) AS query_suggestions_operations_2023,
           SUM(CASE WHEN EXTRACT(YEAR FROM date) = 2023 THEN total_rules_operations END) as total_rules_operations_2023,
           SUM(CASE WHEN EXTRACT(YEAR FROM date) = 2023 THEN search_rules_operations END) as search_rules_operations_2023,
               SUM(CASE WHEN EXTRACT(YEAR FROM date) = 2024 THEN total_search_requests ELSE 0 END) AS usage_2024,
            SUM(CASE WHEN EXTRACT(YEAR FROM date) = 2024 THEN total_search_operations ELSE 0 END) AS usage_ops_2024,
            SUM(CASE WHEN EXTRACT(YEAR FROM date) = 2024 THEN querysuggestions_total_search_operations END) AS query_suggestions_operations_2024,
           SUM(CASE WHEN EXTRACT(YEAR FROM date) = 2024 THEN total_rules_operations END) as total_rules_operations_2024,
           SUM(CASE WHEN EXTRACT(YEAR FROM date) = 2024 THEN search_rules_operations END) as search_rules_operations_2024
        FROM 
            prod_usages.daily_per_application
        WHERE 
            EXTRACT(YEAR FROM date) IN (2025, 2023,2024)
        GROUP BY 
            quarter_number
        ORDER BY 
            quarter_number;
      dataFrameCell: false
      dataConnectionId: e2694948-2c20-47d3-b127-71448e2bf238
      resultVariableName: q_on_q_usage
      useRichDisplay: true
      sqlCellOutputType: PANDAS
      useQueryMode: false
      castDecimals: true
      useNativeDates: true
      outputFilteredResult: true
      allowDuplicateColumns: false
      tableDisplayConfig:
        pageSize: 50
        height: null
        hideIcons: false
        defaultColumnWidth: null
        hideIndex: false
        defaultSortColumn: null
        defaultSortIndexColumn: null
        defaultSortDirection: ASC
        conditionalFormatting: null
        calcs: null
        filters: null
        columnProperties:
          - originalName: quarter_number
            renameTo: null
            size: 142
            wrapText: null
            displayFormat: null
          - originalName: query_suggestions_operations_2022
            renameTo: null
            size: 254
            wrapText: null
            displayFormat: null
          - originalName: query_suggestions_operations_2023
            renameTo: null
            size: 254
            wrapText: null
            displayFormat: null
          - originalName: query_suggestions_operations_2024
            renameTo: null
            size: 396
            wrapText: null
            displayFormat: null
          - originalName: query_suggestions_operations_2025
            renameTo: null
            size: 330
            wrapText: null
            displayFormat: null
          - originalName: row-index-0
            renameTo: null
            size: 39
            wrapText: null
            displayFormat: null
          - originalName: search_rules_operations_2022
            renameTo: null
            size: 223
            wrapText: null
            displayFormat: null
          - originalName: search_rules_operations_2023
            renameTo: null
            size: 336
            wrapText: null
            displayFormat: null
          - originalName: search_rules_operations_2024
            renameTo: null
            size: 336
            wrapText: null
            displayFormat: null
          - originalName: search_rules_operations_2025
            renameTo: null
            size: 280
            wrapText: null
            displayFormat: null
          - originalName: total_rules_operations_2022
            renameTo: null
            size: 212
            wrapText: null
            displayFormat: null
          - originalName: total_rules_operations_2023
            renameTo: null
            size: 324
            wrapText: null
            displayFormat: null
          - originalName: total_rules_operations_2024
            renameTo: null
            size: 324
            wrapText: null
            displayFormat: null
          - originalName: total_rules_operations_2025
            renameTo: null
            size: 270
            wrapText: null
            displayFormat: null
          - originalName: usage_2022
            renameTo: null
            size: 128
            wrapText: null
            displayFormat: null
          - originalName: usage_2023
            renameTo: null
            size: 128
            wrapText: null
            displayFormat: null
          - originalName: usage_2024
            renameTo: null
            size: 120
            wrapText: null
            displayFormat: null
          - originalName: usage_2025
            renameTo: null
            size: 120
            wrapText: null
            displayFormat: null
          - originalName: usage_ops_2022
            renameTo: null
            size: 147
            wrapText: null
            displayFormat: null
          - originalName: usage_ops_2023
            renameTo: null
            size: 147
            wrapText: null
            displayFormat: null
          - originalName: usage_ops_2024
            renameTo: null
            size: 168
            wrapText: null
            displayFormat: null
          - originalName: usage_ops_2025
            renameTo: null
            size: 140
            wrapText: null
            displayFormat: null
        columnOrdering: null
        customColumnOrdering: null
        pinnedColumns: null
        hiddenColumns: null
        pinIndexColumns: false
        showAggregations: false
        columnAggregations: null
  - cellType: CHARTV2
    cellId: 7086e390-6ad8-4ec7-8ebd-7baf38bcd91c # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      height: null
      chartSpec:
        type: layered
        layers:
          - id: a7d52ffe-fa62-4016-8fe3-1757eabdcecc
            xAxis:
              type: number
              style:
                grid:
                  style: solid
                ticks: {}
                labels: {}
              dataFrameColumn: quarter_number
            series:
              - id: 4a4228fa-e043-40b9-86c8-2f562e573ccf
                type: line
                axis:
                  type: number
                  style:
                    grid:
                      style: solid
                    ticks: {}
                    labels: {}
                dataFrameColumns:
                  - usage_2025
                colorOrder: ascending
                color:
                  type: static
                  color: "#003DFF"
                opacity:
                  type: static
                  value: 1
                tooltip:
                  type: auto
                point: false
                stroke: solid
              - id: 78fa7297-cd7d-4182-a792-b22c4bb21da8
                type: line
                axis:
                  type: number
                  style:
                    grid:
                      style: solid
                    ticks: {}
                    labels: {}
                dataFrameColumns:
                  - usage_2023
                colorOrder: ascending
                color:
                  type: static
                  color: "#00B928"
                opacity:
                  type: static
                  value: 1
                tooltip:
                  type: auto
                point: false
                stroke: solid
              - id: 520c405d-78c2-4a06-8136-b85d3283a62d
                type: line
                axis:
                  type: number
                  style:
                    grid:
                      style: solid
                    ticks: {}
                    labels: {}
                dataFrameColumns:
                  - usage_2024
                colorOrder: ascending
                color:
                  type: static
                  color: "#D4142A"
                opacity:
                  type: static
                  value: 1
                tooltip:
                  type: auto
                point: false
                stroke: solid
            dataFrame: q_on_q_usage
            seriesGroups:
              - - 4a4228fa-e043-40b9-86c8-2f562e573ccf
                - 78fa7297-cd7d-4182-a792-b22c4bb21da8
                - 520c405d-78c2-4a06-8136-b85d3283a62d
        settings:
          legend:
            position: right
          tooltip: true
          selectionEnabled: false
      chartSelection: {}
      colorMappings:
        "239586100212.0": "#003DFF"
        "241843299961.0": "#00B928"
        "251787306733.0": "#D4142A"
        "253539170310.0": "#009BCB"
      resultVariable: filter_result_12
      outputResult: false
      displayType: CHART
      displayTableConfig: null
  - cellType: SQL
    cellId: 6f4e847a-4e1f-464d-914f-28119f4baac3 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: Monthly Operations Summary
    config:
      source: |-
        SELECT
            DATE_TRUNC('month', date) AS month,
            SUM(total_rules_operations) AS total_rules_operations_sum,
            SUM(search_rules_operations) AS search_rules_operations_sum
        FROM prod_usages.daily_per_application
        where date > '2023-01-01'
        GROUP BY DATE_TRUNC('month', date)
        ORDER BY month;
      dataFrameCell: false
      dataConnectionId: e2694948-2c20-47d3-b127-71448e2bf238
      resultVariableName: monthly_total_rules_operations_sum
      useRichDisplay: true
      sqlCellOutputType: PANDAS
      useQueryMode: false
      castDecimals: true
      useNativeDates: true
      outputFilteredResult: true
      allowDuplicateColumns: false
      tableDisplayConfig:
        pageSize: 50
        height: null
        hideIcons: false
        defaultColumnWidth: null
        hideIndex: false
        defaultSortColumn: null
        defaultSortIndexColumn: null
        defaultSortDirection: ASC
        conditionalFormatting: null
        calcs: null
        filters: null
        columnProperties:
          - originalName: month
            renameTo: null
            size: 195
            wrapText: null
            displayFormat: null
          - originalName: row-index-0
            renameTo: null
            size: 46
            wrapText: null
            displayFormat: null
          - originalName: search_rules_operations_sum
            renameTo: null
            size: 214
            wrapText: null
            displayFormat: null
          - originalName: total_rules_operations_sum
            renameTo: null
            size: 203
            wrapText: null
            displayFormat: null
        columnOrdering: null
        customColumnOrdering: null
        pinnedColumns: null
        hiddenColumns: null
        pinIndexColumns: false
        showAggregations: false
        columnAggregations: null
  - cellType: CHARTV2
    cellId: f243d793-4572-4401-90c7-481cb9845818 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: Rules usage monthly
    config:
      height: null
      chartSpec:
        type: layered
        layers:
          - id: 7bca7b84-51ba-405f-948c-c42dd2b49490
            xAxis:
              type: datetime
              style:
                grid:
                  style: solid
                ticks: {}
                labels: {}
              dataFrameColumn: month
            series:
              - id: 51bc7df8-4ded-4527-92b8-e77dc7e727ca
                type: line
                axis:
                  type: number
                  style:
                    grid:
                      style: solid
                    ticks: {}
                    labels: {}
                dataFrameColumns:
                  - total_rules_operations_sum
                colorOrder: ascending
                color:
                  type: static
                opacity:
                  type: static
                  value: 1
                tooltip:
                  type: auto
                dataLabels:
                  position: above
                point: false
                stroke: solid
              - id: 79fb66c3-6590-4d25-8777-e239e9d9e005
                type: line
                axis:
                  type: number
                  style:
                    grid:
                      style: solid
                    ticks: {}
                    labels: {}
                dataFrameColumns:
                  - search_rules_operations_sum
                colorOrder: ascending
                color:
                  type: static
                  color: "#00B928"
                opacity:
                  type: static
                  value: 1
                tooltip:
                  type: auto
                dataLabels:
                  position: above
                point: false
                stroke: solid
            dataFrame: monthly_total_rules_operations_sum
            seriesGroups:
              - - 51bc7df8-4ded-4527-92b8-e77dc7e727ca
                - 79fb66c3-6590-4d25-8777-e239e9d9e005
        settings:
          legend:
            position: right
          tooltip: true
          selectionEnabled: false
      chartSelection: {}
      colorMappings: {}
      resultVariable: chart_result
      outputResult: false
      displayType: CHART
      displayTableConfig: null
  - cellType: SQL
    cellId: 29486bb8-5e6f-4a7e-90f8-a4b37ba26c4f # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: Fixed Usage Query
    config:
      source: |-
        WITH CurrentDateInfo AS (
            SELECT
                EXTRACT(YEAR FROM CURRENT_DATE) AS current_year,
                CURRENT_DATE -2 AS today,
                DATE_TRUNC('year', CURRENT_DATE)::date AS start_of_current_year,
                DATE_TRUNC('quarter', CURRENT_DATE)::date AS start_of_current_quarter,
                DATE_TRUNC('month', CURRENT_DATE)::date AS start_of_current_month,
                DATE_TRUNC('week', CURRENT_DATE)::date AS start_of_current_week
        ),
        PreviousYearDateInfo AS (
            SELECT
                current_year - 1 AS previous_year,
                ADD_MONTHS(start_of_current_year, -12)::date AS start_of_previous_year,
                ADD_MONTHS(start_of_current_quarter, -12)::date AS start_of_previous_quarter,
                ADD_MONTHS(start_of_current_month, -12)::date AS start_of_previous_month,
                ADD_MONTHS(start_of_current_week, -12)::date AS start_of_previous_week,
                ADD_MONTHS(today, -12)::date AS today_last_year
            FROM CurrentDateInfo
        ),
        TotalSearchRequestsPeriods AS (
            SELECT 'Current Week' AS period, SUM(total_search_requests) AS total_search_requests
            FROM prod_usages.daily_per_application
            WHERE date BETWEEN (SELECT start_of_current_week FROM CurrentDateInfo) AND (SELECT today FROM CurrentDateInfo)
            UNION ALL
            SELECT 'Current Month' AS period, SUM(total_search_requests) AS total_search_requests
            FROM prod_usages.daily_per_application
            WHERE date BETWEEN (SELECT start_of_current_month FROM CurrentDateInfo) AND (SELECT today FROM CurrentDateInfo)
            UNION ALL
            SELECT 'Current Quarter' AS period, SUM(total_search_requests) AS total_search_requests
            FROM prod_usages.daily_per_application
            WHERE date BETWEEN (SELECT start_of_current_quarter FROM CurrentDateInfo) AND (SELECT today FROM CurrentDateInfo)
            UNION ALL
            SELECT 'Current Year' AS period, SUM(total_search_requests) AS total_search_requests
            FROM prod_usages.daily_per_application
            WHERE date BETWEEN (SELECT start_of_current_year FROM CurrentDateInfo) AND (SELECT today FROM CurrentDateInfo)
            UNION ALL
            SELECT 'Previous Week' AS period, SUM(total_search_requests) AS total_search_requests
            FROM prod_usages.daily_per_application
            WHERE date BETWEEN (SELECT start_of_previous_week FROM PreviousYearDateInfo) AND (SELECT today_last_year FROM PreviousYearDateInfo)
            UNION ALL
            SELECT 'Previous Month' AS period, SUM(total_search_requests) AS total_search_requests
            FROM prod_usages.daily_per_application
            WHERE date BETWEEN (SELECT start_of_previous_month FROM PreviousYearDateInfo) AND (SELECT today_last_year FROM PreviousYearDateInfo)
            UNION ALL
            SELECT 'Previous Quarter' AS period, SUM(total_search_requests) AS total_search_requests
            FROM prod_usages.daily_per_application
            WHERE date BETWEEN (SELECT start_of_previous_quarter FROM PreviousYearDateInfo) AND (SELECT today_last_year FROM PreviousYearDateInfo)
            UNION ALL
            SELECT 'Previous Year' AS period, SUM(total_search_requests) AS total_search_requests
            FROM prod_usages.daily_per_application
            WHERE date BETWEEN (SELECT start_of_previous_year FROM PreviousYearDateInfo) AND (SELECT today_last_year FROM PreviousYearDateInfo)
        ),

        PivotedSearchRequests AS (
            SELECT
                SUM(CASE WHEN period = 'Current Week' THEN total_search_requests ELSE 0 END) AS current_week_total,
                SUM(CASE WHEN period = 'Current Month' THEN total_search_requests ELSE 0 END) AS current_month_total,
                SUM(CASE WHEN period = 'Current Quarter' THEN total_search_requests ELSE 0 END) AS current_quarter_total,
                SUM(CASE WHEN period = 'Current Year' THEN total_search_requests ELSE 0 END) AS current_year_total,
                SUM(CASE WHEN period = 'Previous Week' THEN total_search_requests ELSE 0 END) AS previous_week_total,
                SUM(CASE WHEN period = 'Previous Month' THEN total_search_requests ELSE 0 END) AS previous_month_total,
                SUM(CASE WHEN period = 'Previous Quarter' THEN total_search_requests ELSE 0 END) AS previous_quarter_total,
                SUM(CASE WHEN period = 'Previous Year' THEN total_search_requests ELSE 0 END) AS previous_year_total
            FROM TotalSearchRequestsPeriods
        )
        SELECT
            CI.*,
            PYDI.*,
            PSR.*
        FROM
            CurrentDateInfo CI,
            PreviousYearDateInfo PYDI,
            PivotedSearchRequests PSR;
      dataFrameCell: false
      dataConnectionId: e2694948-2c20-47d3-b127-71448e2bf238
      resultVariableName: metrics
      useRichDisplay: true
      sqlCellOutputType: PANDAS
      useQueryMode: false
      castDecimals: true
      useNativeDates: true
      outputFilteredResult: true
      allowDuplicateColumns: false
      tableDisplayConfig:
        pageSize: 50
        height: null
        hideIcons: false
        defaultColumnWidth: null
        hideIndex: false
        defaultSortColumn: null
        defaultSortIndexColumn: null
        defaultSortDirection: ASC
        conditionalFormatting: null
        calcs: null
        filters: null
        columnProperties:
          - originalName: current_month
            renameTo: null
            size: 136
            wrapText: null
            displayFormat: null
          - originalName: current_month_total
            renameTo: null
            size: 167
            wrapText: null
            displayFormat: null
          - originalName: current_quarter
            renameTo: null
            size: 140
            wrapText: null
            displayFormat: null
          - originalName: current_quarter_total
            renameTo: null
            size: 170
            wrapText: null
            displayFormat: null
          - originalName: current_week
            renameTo: null
            size: 129
            wrapText: null
            displayFormat: null
          - originalName: current_week_total
            renameTo: null
            size: 160
            wrapText: null
            displayFormat: null
          - originalName: current_year
            renameTo: null
            size: 124
            wrapText: null
            displayFormat: null
          - originalName: current_year_total
            renameTo: null
            size: 154
            wrapText: null
            displayFormat: null
          - originalName: current_year_usage
            renameTo: null
            size: 161
            wrapText: null
            displayFormat: null
          - originalName: days_passed_in_month
            renameTo: null
            size: 174
            wrapText: null
            displayFormat: null
          - originalName: days_passed_in_quarter
            renameTo: null
            size: 189
            wrapText: null
            displayFormat: null
          - originalName: days_passed_in_week
            renameTo: null
            size: 154
            wrapText: null
            displayFormat: null
          - originalName: days_passed_in_year
            renameTo: null
            size: 186
            wrapText: null
            displayFormat: null
          - originalName: fiscal_quarter_start_date
            renameTo: null
            size: 190
            wrapText: null
            displayFormat: null
          - originalName: last_month_start
            renameTo: null
            size: 195
            wrapText: null
            displayFormat: null
          - originalName: last_month_usage
            renameTo: null
            size: 155
            wrapText: null
            displayFormat: null
          - originalName: last_quarter_usage
            renameTo: null
            size: 158
            wrapText: null
            displayFormat: null
          - originalName: last_week_start
            renameTo: null
            size: 195
            wrapText: null
            displayFormat: null
          - originalName: last_week_usage
            renameTo: null
            size: 148
            wrapText: null
            displayFormat: null
          - originalName: month
            renameTo: null
            size: 71
            wrapText: null
            displayFormat: null
          - originalName: month_difference
            renameTo: null
            size: 150
            wrapText: null
            displayFormat: null
          - originalName: perc_mom
            renameTo: null
            size: 113
            wrapText: null
            displayFormat: null
          - originalName: perc_wow
            renameTo: null
            size: 110
            wrapText: null
            displayFormat: null
          - originalName: perc_yoy
            renameTo: null
            size: 104
            wrapText: null
            displayFormat: null
          - originalName: perc_yoy_1
            renameTo: null
            size: 117
            wrapText: null
            displayFormat: null
          - originalName: period
            renameTo: null
            size: 122
            wrapText: null
            displayFormat: null
          - originalName: prev_to_last_month_usage
            renameTo: null
            size: 201
            wrapText: null
            displayFormat: null
          - originalName: prev_week_usage
            renameTo: null
            size: 151
            wrapText: null
            displayFormat: null
          - originalName: prev_year_month_usage
            renameTo: null
            size: 187
            wrapText: null
            displayFormat: null
          - originalName: prev_year_quarter_usage
            renameTo: null
            size: 190
            wrapText: null
            displayFormat: null
          - originalName: prev_year_usage
            renameTo: null
            size: 145
            wrapText: null
            displayFormat: null
          - originalName: prev_year_week_usage
            renameTo: null
            size: 180
            wrapText: null
            displayFormat: null
          - originalName: previous_month
            renameTo: null
            size: 142
            wrapText: null
            displayFormat: null
          - originalName: previous_month_total
            renameTo: null
            size: 174
            wrapText: null
            displayFormat: null
          - originalName: previous_quarter
            renameTo: null
            size: 147
            wrapText: null
            displayFormat: null
          - originalName: previous_quarter_total
            renameTo: null
            size: 177
            wrapText: null
            displayFormat: null
          - originalName: previous_week
            renameTo: null
            size: 136
            wrapText: null
            displayFormat: null
          - originalName: previous_week_total
            renameTo: null
            size: 167
            wrapText: null
            displayFormat: null
          - originalName: previous_year
            renameTo: null
            size: 110
            wrapText: null
            displayFormat: null
          - originalName: previous_year_total
            renameTo: null
            size: 161
            wrapText: null
            displayFormat: null
          - originalName: quarter
            renameTo: null
            size: 75
            wrapText: null
            displayFormat: null
          - originalName: row-index-0
            renameTo: null
            size: 38
            wrapText: null
            displayFormat: null
          - originalName: start_of_current_month
            renameTo: null
            size: 183
            wrapText: null
            displayFormat: null
          - originalName: start_of_current_quarter
            renameTo: null
            size: 187
            wrapText: null
            displayFormat: null
          - originalName: start_of_current_week
            renameTo: null
            size: 176
            wrapText: null
            displayFormat: null
          - originalName: start_of_current_year
            renameTo: null
            size: 171
            wrapText: null
            displayFormat: null
          - originalName: start_of_previous_month
            renameTo: null
            size: 190
            wrapText: null
            displayFormat: null
          - originalName: start_of_previous_quarter
            renameTo: null
            size: 194
            wrapText: null
            displayFormat: null
          - originalName: start_of_previous_week
            renameTo: null
            size: 183
            wrapText: null
            displayFormat: null
          - originalName: start_of_previous_year
            renameTo: null
            size: 178
            wrapText: null
            displayFormat: null
          - originalName: today
            renameTo: null
            size: 98
            wrapText: null
            displayFormat: null
          - originalName: today_last_year
            renameTo: null
            size: 140
            wrapText: null
            displayFormat: null
          - originalName: total_search_requests
            renameTo: null
            size: 176
            wrapText: null
            displayFormat: null
          - originalName: total_search_requests_current
            renameTo: null
            size: 221
            wrapText: null
            displayFormat: null
          - originalName: total_search_requests_current_month
            renameTo: null
            size: 263
            wrapText: null
            displayFormat: null
          - originalName: total_search_requests_current_period
            renameTo: null
            size: 263
            wrapText: null
            displayFormat: null
          - originalName: total_search_requests_current_quarter
            renameTo: null
            size: 267
            wrapText: null
            displayFormat: null
          - originalName: total_search_requests_current_week
            renameTo: null
            size: 256
            wrapText: null
            displayFormat: null
          - originalName: total_search_requests_current_year
            renameTo: null
            size: 251
            wrapText: null
            displayFormat: null
          - originalName: total_search_requests_previous
            renameTo: null
            size: 229
            wrapText: null
            displayFormat: null
          - originalName: total_search_requests_previous_quarter
            renameTo: null
            size: 274
            wrapText: null
            displayFormat: null
          - originalName: total_search_requests_previous_year
            renameTo: null
            size: 258
            wrapText: null
            displayFormat: null
          - originalName: total_search_requests_previous_year_week
            renameTo: null
            size: 292
            wrapText: null
            displayFormat: null
          - originalName: total_search_requests_year_to_date
            renameTo: null
            size: 252
            wrapText: null
            displayFormat: null
          - originalName: week
            renameTo: null
            size: 67
            wrapText: null
            displayFormat: null
          - originalName: week_difference
            renameTo: null
            size: 144
            wrapText: null
            displayFormat: null
        columnOrdering: null
        customColumnOrdering: null
        pinnedColumns: null
        hiddenColumns: null
        pinIndexColumns: false
        showAggregations: false
        columnAggregations: null
  - cellType: METRIC
    cellId: 2709d67c-9af8-42a3-9266-775801c2eeb3 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      title: Current Week
      valueVariableName: metrics
      showComparison: true
      comparisonType: PERCENTAGE
      comparisonVariableName: metrics
      comparisonFormat: POSITIVE_NEGATIVE
      comparisonLabel: From last year same week range
      displayFormat:
        format: PLAIN
        currency: USD
        columnType: NUMBER
        numDecimalDigits: 2
        abbreviateLargeNumbers: false
      valueColumn: current_week_total
      valueRowIndex: 0
      valueAggregate: null
      comparisonColumn: previous_week_total
      comparisonRowIndex: 0
      comparisonAggregate: null
      valueResultVariable: null
      comparisonResultVariable: null
      outputResult: false
  - cellType: METRIC
    cellId: 4920d298-3a6c-4e02-9989-f7a344610f76 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      title: Current Month
      valueVariableName: metrics
      showComparison: true
      comparisonType: PERCENTAGE
      comparisonVariableName: metrics
      comparisonFormat: POSITIVE_NEGATIVE
      comparisonLabel: From last year same month range
      displayFormat:
        format: PLAIN
        currency: USD
        columnType: NUMBER
        numDecimalDigits: 2
        abbreviateLargeNumbers: false
      valueColumn: current_month_total
      valueRowIndex: 0
      valueAggregate: null
      comparisonColumn: previous_month_total
      comparisonRowIndex: 0
      comparisonAggregate: null
      valueResultVariable: null
      comparisonResultVariable: null
      outputResult: false
  - cellType: METRIC
    cellId: 55c02e5b-9db1-40e3-8b02-27f6614fd21a # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      title: Current Quarter
      valueVariableName: metrics
      showComparison: true
      comparisonType: PERCENTAGE
      comparisonVariableName: metrics
      comparisonFormat: POSITIVE_NEGATIVE
      comparisonLabel: From last year same quarter range
      displayFormat:
        format: PLAIN
        currency: USD
        columnType: NUMBER
        numDecimalDigits: 2
        abbreviateLargeNumbers: false
      valueColumn: current_quarter_total
      valueRowIndex: 0
      valueAggregate: null
      comparisonColumn: previous_quarter_total
      comparisonRowIndex: 0
      comparisonAggregate: null
      valueResultVariable: null
      comparisonResultVariable: null
      outputResult: false
  - cellType: METRIC
    cellId: a37622ac-1afd-4eb5-84f9-b4f456377655 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      title: Current Year
      valueVariableName: metrics
      showComparison: true
      comparisonType: PERCENTAGE
      comparisonVariableName: metrics
      comparisonFormat: POSITIVE_NEGATIVE
      comparisonLabel: From last year same range
      displayFormat:
        format: PLAIN
        currency: USD
        columnType: NUMBER
        numDecimalDigits: 2
        abbreviateLargeNumbers: false
      valueColumn: current_quarter_total
      valueRowIndex: 0
      valueAggregate: null
      comparisonColumn: previous_year_total
      comparisonRowIndex: 0
      comparisonAggregate: null
      valueResultVariable: null
      comparisonResultVariable: null
      outputResult: false
  - cellType: CHARTV2
    cellId: 0249c9c7-7d4b-43f1-ab04-a4d275aee4b6 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      height: null
      chartSpec:
        type: layered
        layers:
          - id: 80f3eafa-e188-4a5f-b87b-e81ff26c03d5
            xAxis:
              type: number
              style:
                grid:
                  style: solid
                ticks: {}
                labels: {}
              dataFrameColumn: week_number
            series:
              - id: 028c67d2-d987-4ab2-b7e4-c89502d1921c
                type: line
                axis:
                  type: number
                  style:
                    grid:
                      style: solid
                    ticks: {}
                    labels: {}
                dataFrameColumns:
                  - query_suggestions_operations_2022
                colorOrder: ascending
                color:
                  type: static
                opacity:
                  type: static
                  value: 1
                tooltip:
                  type: auto
                point: false
                stroke: solid
              - id: 5da71ae6-ae35-4320-a6da-ac10d0fb7cf0
                type: line
                axis:
                  type: number
                  style:
                    grid:
                      style: solid
                    ticks: {}
                    labels: {}
                dataFrameColumns:
                  - total_rules_operations_2022
                colorOrder: ascending
                color:
                  type: static
                  color: "#00B928"
                opacity:
                  type: static
                  value: 1
                tooltip:
                  type: auto
                point: false
                stroke: solid
              - id: 1f8b30f6-4de5-4ec3-ab40-03459431649a
                type: line
                axis:
                  type: number
                  style:
                    ticks: {}
                    labels: {}
                dataFrameColumns:
                  - usage_ops_2022
                colorOrder: ascending
                color:
                  type: static
                  color: "#D4142A"
                opacity:
                  type: static
                  value: 1
                tooltip:
                  type: auto
                point: false
                stroke: solid
            dataFrame: week_on_week_usage
            seriesGroups:
              - - 028c67d2-d987-4ab2-b7e4-c89502d1921c
                - 5da71ae6-ae35-4320-a6da-ac10d0fb7cf0
              - - 1f8b30f6-4de5-4ec3-ab40-03459431649a
        settings:
          legend:
            position: right
          tooltip: true
          selectionEnabled: false
      chartSelection: {}
      colorMappings: {}
      resultVariable: filter_result_13
      outputResult: false
      displayType: CHART
      displayTableConfig: null
  - cellType: CHARTV2
    cellId: fc393176-8b23-4428-8d47-89d91dae8ee7 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      height: null
      chartSpec:
        type: layered
        layers:
          - id: 80f3eafa-e188-4a5f-b87b-e81ff26c03d5
            xAxis:
              type: number
              style:
                grid:
                  style: solid
                ticks: {}
                labels: {}
              dataFrameColumn: week_number
            series:
              - id: 028c67d2-d987-4ab2-b7e4-c89502d1921c
                type: line
                axis:
                  type: number
                  style:
                    grid:
                      style: solid
                    ticks: {}
                    labels: {}
                dataFrameColumns:
                  - query_suggestions_operations_2023
                colorOrder: ascending
                color:
                  type: static
                opacity:
                  type: static
                  value: 1
                tooltip:
                  type: auto
                point: false
                stroke: solid
              - id: 5da71ae6-ae35-4320-a6da-ac10d0fb7cf0
                type: line
                axis:
                  type: number
                  style:
                    grid:
                      style: solid
                    ticks: {}
                    labels: {}
                dataFrameColumns:
                  - total_rules_operations_2023
                colorOrder: ascending
                color:
                  type: static
                  color: "#00B928"
                opacity:
                  type: static
                  value: 1
                tooltip:
                  type: auto
                point: false
                stroke: solid
              - id: 94449105-9a22-4ab8-b732-eb2067562b97
                type: line
                axis:
                  type: number
                  style:
                    grid:
                      style: solid
                    ticks: {}
                    labels: {}
                dataFrameColumns:
                  - usage_ops_2023
                colorOrder: ascending
                color:
                  type: static
                  color: "#009BCB"
                opacity:
                  type: static
                  value: 1
                tooltip:
                  type: auto
                point: false
                stroke: solid
            dataFrame: week_on_week_usage
            seriesGroups:
              - - 028c67d2-d987-4ab2-b7e4-c89502d1921c
                - 5da71ae6-ae35-4320-a6da-ac10d0fb7cf0
                - 94449105-9a22-4ab8-b732-eb2067562b97
        settings:
          legend:
            position: right
          tooltip: true
          selectionEnabled: false
      chartSelection: {}
      colorMappings: {}
      resultVariable: filter_result_14
      outputResult: false
      displayType: CHART
      displayTableConfig: null
  - cellType: SQL
    cellId: e74ec6d0-c8ad-4214-95e5-7eb50c64a1c0 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      source: "with slg as

        (

        \        select app.account_id , 'slg' as type, a.arr, churn_date__c as churned_on

        from prod_dimensional.dim_application app

        left join prod_dimensional.dim_account a\ 

        on a.account_id = app.account_id

        LEFT JOIN raw_salesforce.account sfa on sfa.id = a.account_id

        where a.arr > 0

        --and deleted_at IS NULL

        group by app.account_id ,  a.arr, churn_date__c


        ),


        usage as\ 

        (

        \    select --DATE_TRUNC('week', date)\ 

        \    date AS week, application_id,\ 

        \    sum(total_search_requests) as total_search_requests ,\ 

        \    sum(total_search_operations) as total_search_operations

        \    from prod_usages.daily_per_application usage

        \    where usage.date > current_date-800

        \    group by 1,2

        ),


        usage_total as\ 

        (

        \    select --DATE_TRUNC('week', date)\ 

        \    date AS week,

        \    sum(total_search_requests) as total_search_requests_total ,\ 

        \    sum(total_search_operations) as total_search_operations_total

        \    from prod_usages.daily_per_application usage

        \    where usage.date >  current_date-800

        \    group by 1

        )


        select\ 

        u.week,

        public_application_id,\ 

        \    total_search_requests,

        \    total_search_operations,

        \    total_search_requests_total,

        \    total_search_operations_total,

        \    a.account_id,

        \    a.account_name,

        \    a.industry,

        \    a.naics_category,

        \    a.industry_category,

        \    a.industry_vertical,

        \    a.industry_sub_vertical,

        \    a.arr,

        \    churned_on

        from usage u

        LEFT JOIN usage_total ut on ut.week = u.week

        \ LEFT JOIN prod_dimensional.dim_application app ON app.public_application_id = u.application_id

        \    LEFT JOIN prod_dimensional.dim_account a ON a.account_id = app.account_id

        \    right join slg on slg.account_id = app.account_id



        \    "
      dataFrameCell: false
      dataConnectionId: e2694948-2c20-47d3-b127-71448e2bf238
      resultVariableName: dataframe
      useRichDisplay: true
      sqlCellOutputType: PANDAS
      useQueryMode: false
      castDecimals: true
      useNativeDates: true
      outputFilteredResult: true
      allowDuplicateColumns: false
      tableDisplayConfig:
        pageSize: 50
        height: null
        hideIcons: false
        defaultColumnWidth: null
        hideIndex: false
        defaultSortColumn: null
        defaultSortIndexColumn: null
        defaultSortDirection: ASC
        conditionalFormatting: null
        calcs: null
        filters: null
        columnProperties:
          - originalName: account_id
            renameTo: null
            size: 155
            wrapText: null
            displayFormat: null
          - originalName: account_name
            renameTo: null
            size: 135
            wrapText: null
            displayFormat: null
          - originalName: arr
            renameTo: null
            size: 68
            wrapText: null
            displayFormat: null
          - originalName: churned_on
            renameTo: null
            size: 116
            wrapText: null
            displayFormat: null
          - originalName: industry
            renameTo: null
            size: 186
            wrapText: null
            displayFormat: null
          - originalName: industry_category
            renameTo: null
            size: 151
            wrapText: null
            displayFormat: null
          - originalName: industry_sub_vertical
            renameTo: null
            size: 252
            wrapText: null
            displayFormat: null
          - originalName: industry_vertical
            renameTo: null
            size: 204
            wrapText: null
            displayFormat: null
          - originalName: month
            renameTo: null
            size: 195
            wrapText: null
            displayFormat: null
          - originalName: naics_category
            renameTo: null
            size: 135
            wrapText: null
            displayFormat: null
          - originalName: public_application_id
            renameTo: null
            size: 171
            wrapText: null
            displayFormat: null
          - originalName: quarter
            renameTo: null
            size: 195
            wrapText: null
            displayFormat: null
          - originalName: row-index-0
            renameTo: null
            size: 46
            wrapText: null
            displayFormat: null
          - originalName: toal_search_operations
            renameTo: null
            size: 182
            wrapText: null
            displayFormat: null
          - originalName: toal_search_operations_total
            renameTo: null
            size: 213
            wrapText: null
            displayFormat: null
          - originalName: total_search_operations
            renameTo: null
            size: 186
            wrapText: null
            displayFormat: null
          - originalName: total_search_operations_total
            renameTo: null
            size: 217
            wrapText: null
            displayFormat: null
          - originalName: total_search_requests
            renameTo: null
            size: 176
            wrapText: null
            displayFormat: null
          - originalName: total_search_requests_total
            renameTo: null
            size: 207
            wrapText: null
            displayFormat: null
          - originalName: week
            renameTo: null
            size: 195
            wrapText: null
            displayFormat: null
        columnOrdering: null
        customColumnOrdering: null
        pinnedColumns: null
        hiddenColumns: null
        pinIndexColumns: false
        showAggregations: false
        columnAggregations: null
  - cellType: SQL
    cellId: db430498-d75d-4735-bc21-04103285127a # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: Top Decline last 2 years
    config:
      source: |
        WITH YearDates AS (
            SELECT 
                date_trunc('year', CURRENT_DATE) - interval '1 year' AS LastYearStart,
                date_trunc('year', CURRENT_DATE) - interval '2 years' AS YearBeforeLastStart
        ),
        YearData AS (
            SELECT 
                yd.LastYearStart,
                yd.YearBeforeLastStart,
                d.account_id,
                d.account_name,
                d.industry,
                d.naics_category,
                d.industry_category,
                d.industry_vertical,
                d.industry_sub_vertical,
                d.arr,
                date_trunc('year', d.week) AS year_start,
                SUM(d.total_search_requests) AS total_requests
            FROM dataframe d
            CROSS JOIN YearDates yd
            WHERE date_trunc('year', d.week) IN (yd.LastYearStart, yd.YearBeforeLastStart)
            AND d.churned_on IS NULL
            GROUP BY yd.LastYearStart, yd.YearBeforeLastStart, d.account_id, d.account_name, d.industry, d.naics_category, d.industry_category, d.industry_vertical, d.industry_sub_vertical, d.arr, year_start
        ),
        AggregatedData AS (
            SELECT 
                account_id,
                account_name,
                industry,
                naics_category,
                industry_category,
                industry_vertical,
                industry_sub_vertical,
                arr,
                MAX(CASE WHEN year_start = LastYearStart THEN total_requests END) AS Last_Year_Requests,
                MAX(CASE WHEN year_start = YearBeforeLastStart THEN total_requests END) AS Year_Before_Last_Requests
            FROM YearData
            GROUP BY account_id, account_name, industry, naics_category, industry_category, industry_vertical, industry_sub_vertical, arr
        ),
        CalculatedData AS (
            SELECT 
                *,
                COALESCE(Last_Year_Requests, 0) - COALESCE(Year_Before_Last_Requests, 0) AS Yearly_Change,
                CASE 
                    WHEN COALESCE(Year_Before_Last_Requests, 0) > 0 THEN
                        (COALESCE(Last_Year_Requests, 0) - COALESCE(Year_Before_Last_Requests, 0)) / COALESCE(Year_Before_Last_Requests, 0) * 100
                    ELSE 0
                END AS Yearly_Percentage_Change
            FROM AggregatedData
        )
        SELECT
            account_name,
                Yearly_Change,
            Yearly_Percentage_Change,
                account_id,
            industry,
            naics_category,
            industry_category,
            industry_vertical,
            industry_sub_vertical,
            arr,
            Last_Year_Requests,
            Year_Before_Last_Requests

        FROM CalculatedData
        ORDER BY Yearly_Change ASC
        LIMIT 10;
      dataFrameCell: true
      dataConnectionId: null
      resultVariableName: dataframe_21
      useRichDisplay: true
      sqlCellOutputType: PANDAS
      useQueryMode: false
      castDecimals: true
      useNativeDates: true
      outputFilteredResult: true
      allowDuplicateColumns: false
      tableDisplayConfig:
        pageSize: 50
        height: null
        hideIcons: false
        defaultColumnWidth: null
        hideIndex: false
        defaultSortColumn: null
        defaultSortIndexColumn: null
        defaultSortDirection: ASC
        conditionalFormatting:
          rulesets:
            - type: GRADIENT
              style: RED_WHITE
              columns:
                type: INCLUDE
                includedColumns:
                  - Yearly_Change
            - type: RULES
              rules:
                - style: RED
                  expression:
                    op: EQ
                    arg: ""
              columns:
                type: INCLUDE
                includedColumns:
                  - Yearly_Change
        calcs: null
        filters: null
        columnProperties:
          - originalName: Current_Quarter_Requests
            renameTo: null
            size: 199
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: Current_Year_Requests
            renameTo: null
            size: 176
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: Last_Year_Requests
            renameTo: null
            size: 163
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: Previous_Quarter_Requests
            renameTo: null
            size: 173
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: Previous_Year_Requests
            renameTo: null
            size: 180
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: Q3_2023
            renameTo: null
            size: 182
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: Q4_2023
            renameTo: null
            size: 114
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: Year_Before_Last_Requests
            renameTo: null
            size: 300
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: Yearly_Change
            renameTo: null
            size: 133
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: Yearly_Percentage_Change
            renameTo: null
            size: 200
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: account_id
            renameTo: null
            size: 162
            wrapText: null
            displayFormat: null
          - originalName: account_name
            renameTo: null
            size: 175
            wrapText: null
            displayFormat: null
          - originalName: arr
            renameTo: null
            size: 99
            wrapText: null
            displayFormat:
              format: CURRENCY
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: decline
            renameTo: null
            size: 142
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: industry
            renameTo: null
            size: 186
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: industry_category
            renameTo: null
            size: 153
            wrapText: null
            displayFormat: null
          - originalName: industry_sub_vertical
            renameTo: null
            size: 274
            wrapText: null
            displayFormat: null
          - originalName: industry_vertical
            renameTo: null
            size: 265
            wrapText: null
            displayFormat: null
          - originalName: naics_category
            renameTo: null
            size: 135
            wrapText: null
            displayFormat: null
          - originalName: percentage_decline
            renameTo: null
            size: 116
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: row-index-0
            renameTo: null
            size: 38
            wrapText: null
            displayFormat: null
        columnOrdering: null
        customColumnOrdering: null
        pinnedColumns: null
        hiddenColumns: null
        pinIndexColumns: false
        showAggregations: false
        columnAggregations: null
  - cellType: SQL
    cellId: 30934d72-d28d-4c4d-b92b-aa8d693e2b43 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: Top decline Last 2 quarters
    config:
      source: |
        WITH QuarterDates AS (
            SELECT 
                date_trunc('quarter', CURRENT_DATE) - interval '3 months' AS LastQuarterStart,
                date_trunc('quarter', CURRENT_DATE) - interval '6 months' AS SecondLastQuarterStart,
                date_trunc('quarter', CURRENT_DATE) - interval '1 year' - interval '3 months' AS LastYearSameQuarterStart,
                date_trunc('quarter', CURRENT_DATE) - interval '1 year' - interval '6 months' AS LastYearSecondLastQuarterStart
        ),
        QuarterData AS (
            SELECT 
                qd.LastQuarterStart,
                qd.SecondLastQuarterStart,
                qd.LastYearSameQuarterStart,
                qd.LastYearSecondLastQuarterStart,
                d.account_id,
                d.account_name,
                d.industry,
                d.naics_category,
                d.industry_category,
                d.industry_vertical,
                d.industry_sub_vertical,
                d.arr,
                date_trunc('quarter', d.week) AS quarter_start,
                SUM(d.total_search_requests) AS total_requests
            FROM dataframe d
            CROSS JOIN QuarterDates qd
            WHERE date_trunc('quarter', d.week) IN (qd.LastQuarterStart, qd.SecondLastQuarterStart, qd.LastYearSameQuarterStart, qd.LastYearSecondLastQuarterStart)
            AND d.churned_on IS NULL
            GROUP BY qd.LastQuarterStart, qd.SecondLastQuarterStart, qd.LastYearSameQuarterStart, 
            qd.LastYearSecondLastQuarterStart, d.account_id, d.account_name, d.industry, d.naics_category, 
            d.industry_category, d.industry_vertical, d.industry_sub_vertical, d.arr, quarter_start,
            LastQuarterStart,
                SecondLastQuarterStart,
                LastYearSameQuarterStart,
                LastYearSecondLastQuarterStart
        ),
        AggregatedData AS (
            SELECT 
                account_id,
                account_name,
                industry,
                naics_category,
                industry_category,
                industry_vertical,
                industry_sub_vertical,
                arr,
                LastQuarterStart,
                SecondLastQuarterStart,
                LastYearSameQuarterStart,
                LastYearSecondLastQuarterStart,
                MAX(CASE WHEN quarter_start = LastQuarterStart THEN total_requests END) AS Last_Quarter_Requests,
                MAX(CASE WHEN quarter_start = SecondLastQuarterStart THEN total_requests END) AS Second_Last_Quarter_Requests,
                MAX(CASE WHEN quarter_start = LastYearSameQuarterStart THEN total_requests END) AS Last_Year_Same_Quarter_Requests,
                MAX(CASE WHEN quarter_start = LastYearSecondLastQuarterStart THEN total_requests END) AS Last_Year_Second_Last_Quarter_Requests
            FROM QuarterData
            GROUP BY account_id, account_name, industry, naics_category, industry_category, industry_vertical, industry_sub_vertical, arr,LastQuarterStart,
                SecondLastQuarterStart,
                LastYearSameQuarterStart,
                LastYearSecondLastQuarterStart
        ),
        CalculatedData AS (
            SELECT 
                *,
                COALESCE(Last_Quarter_Requests, 0) - COALESCE(Second_Last_Quarter_Requests, 0) AS Current_Year_Change,
                CASE 
                    WHEN COALESCE(Second_Last_Quarter_Requests, 0) > 0 THEN
                        (COALESCE(Last_Quarter_Requests, 0) - COALESCE(Second_Last_Quarter_Requests, 0)) / COALESCE(Second_Last_Quarter_Requests, 0) * 100
                    ELSE NULL
                END AS Current_Year_Percentage_Change,
                COALESCE(Last_Year_Same_Quarter_Requests, 0) - COALESCE(Last_Year_Second_Last_Quarter_Requests, 0) AS Last_Year_Change,
                CASE 
                    WHEN COALESCE(Last_Year_Second_Last_Quarter_Requests, 0) > 0 THEN
                        (COALESCE(Last_Year_Same_Quarter_Requests, 0) - COALESCE(Last_Year_Second_Last_Quarter_Requests, 0)) / COALESCE(Last_Year_Second_Last_Quarter_Requests, 0) * 100
                    ELSE NULL
                END AS Last_Year_Percentage_Change
            FROM AggregatedData
        )
        SELECT 

            account_name,
            Current_Year_Change,
            Current_Year_Percentage_Change,
            Last_Year_Percentage_Change,
                account_id,
            industry,
            naics_category,
            industry_category,
            industry_vertical,
            industry_sub_vertical,
            arr,
            LastQuarterStart,
                SecondLastQuarterStart,
                LastYearSameQuarterStart,
                LastYearSecondLastQuarterStart,
                Last_Quarter_Requests,
            Second_Last_Quarter_Requests,
            Last_Year_Same_Quarter_Requests,
            Last_Year_Second_Last_Quarter_Requests,
            Last_Year_Change
        FROM CalculatedData
        ORDER BY Current_Year_Change ASC
        LIMIT 10;
      dataFrameCell: true
      dataConnectionId: null
      resultVariableName: dataframe_10
      useRichDisplay: true
      sqlCellOutputType: PANDAS
      useQueryMode: false
      castDecimals: true
      useNativeDates: true
      outputFilteredResult: true
      allowDuplicateColumns: false
      tableDisplayConfig:
        pageSize: 50
        height: null
        hideIcons: false
        defaultColumnWidth: null
        hideIndex: false
        defaultSortColumn: Current_Year_Change
        defaultSortIndexColumn: null
        defaultSortDirection: ASC
        conditionalFormatting:
          rulesets:
            - type: GRADIENT
              style: RED_WHITE
              columns:
                type: INCLUDE
                includedColumns:
                  - Current_Year_Change
            - type: RULES
              rules:
                - style: RED
                  expression:
                    op: EQ
                    arg: ""
              columns:
                type: EXCLUDE
                excludedColumns: []
        calcs: null
        filters: null
        columnProperties:
          - originalName: Current_Quarter_Requests
            renameTo: null
            size: 199
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: Current_Year_Change
            renameTo: null
            size: 171
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: Current_Year_Percentage_Change
            renameTo: null
            size: 220
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: LastQuarterStart
            renameTo: null
            size: 192
            wrapText: null
            displayFormat: null
          - originalName: LastYearSameQuarterStart
            renameTo: null
            size: 288
            wrapText: null
            displayFormat: null
          - originalName: LastYearSecondLastQuarterStart
            renameTo: null
            size: 360
            wrapText: null
            displayFormat: null
          - originalName: Last_Quarter_Requests
            renameTo: null
            size: 181
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: Last_Year_Change
            renameTo: null
            size: null
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: Last_Year_Percentage_Change
            renameTo: null
            size: 215
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: Last_Year_Same_Quarter_Requests
            renameTo: null
            size: 246
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: Last_Year_Second_Last_Quarter_Requests
            renameTo: null
            size: 285
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: Previous_Quarter_Requests
            renameTo: null
            size: 173
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: Q3_2023
            renameTo: null
            size: 182
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: Q4_2023
            renameTo: null
            size: 114
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: SecondLastQuarterStart
            renameTo: null
            size: 264
            wrapText: null
            displayFormat: null
          - originalName: Second_Last_Quarter_Requests
            renameTo: null
            size: 227
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: account_id
            renameTo: null
            size: 162
            wrapText: null
            displayFormat: null
          - originalName: account_name
            renameTo: null
            size: 138
            wrapText: null
            displayFormat: null
          - originalName: arr
            renameTo: null
            size: 99
            wrapText: null
            displayFormat:
              format: CURRENCY
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: decline
            renameTo: null
            size: 114
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: industry
            renameTo: null
            size: 186
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: industry_category
            renameTo: null
            size: 153
            wrapText: null
            displayFormat: null
          - originalName: industry_sub_vertical
            renameTo: null
            size: 274
            wrapText: null
            displayFormat: null
          - originalName: industry_vertical
            renameTo: null
            size: 265
            wrapText: null
            displayFormat: null
          - originalName: naics_category
            renameTo: null
            size: 135
            wrapText: null
            displayFormat: null
          - originalName: percentage_decline
            renameTo: null
            size: 160
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: row-index-0
            renameTo: null
            size: 38
            wrapText: null
            displayFormat: null
        columnOrdering: null
        customColumnOrdering: null
        pinnedColumns: null
        hiddenColumns: null
        pinIndexColumns: false
        showAggregations: false
        columnAggregations: null
  - cellType: SQL
    cellId: e8308c63-bc92-4a31-b399-630c9e0a3024 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: Top decline Last 2 months
    config:
      source: |
        WITH MonthDates AS (
            SELECT 
                date_trunc('month', CURRENT_DATE) - interval '1 month' AS LastMonthStart,
                date_trunc('month', CURRENT_DATE) - interval '2 months' AS SecondLastMonthStart,
                date_trunc('month', CURRENT_DATE) - interval '1 year' - interval '1 month' AS LastYearSameMonthStart,
                date_trunc('month', CURRENT_DATE) - interval '1 year' - interval '2 months' AS LastYearSecondLastMonthStart
        ),
        MonthData AS (
            SELECT 
                md.LastMonthStart,
                md.SecondLastMonthStart,
                md.LastYearSameMonthStart,
                md.LastYearSecondLastMonthStart,
                d.account_id,
                d.account_name,
                d.industry,
                d.naics_category,
                d.industry_category,
                d.industry_vertical,
                d.industry_sub_vertical,
                d.arr,
                date_trunc('month', d.week) AS month_start,
                SUM(d.total_search_requests) AS total_requests
            FROM dataframe d
            CROSS JOIN MonthDates md
            WHERE date_trunc('month', d.week) IN (md.LastMonthStart, md.SecondLastMonthStart, md.LastYearSameMonthStart, md.LastYearSecondLastMonthStart)
            AND d.churned_on IS NULL
            GROUP BY md.LastMonthStart, md.SecondLastMonthStart, md.LastYearSameMonthStart, md.LastYearSecondLastMonthStart, d.account_id, d.account_name, d.industry, d.naics_category, d.industry_category, d.industry_vertical, d.industry_sub_vertical, d.arr, month_start
        ),
        AggregatedData AS (
            SELECT 
                account_id,
                account_name,
                industry,
                naics_category,
                industry_category,
                industry_vertical,
                industry_sub_vertical,
                arr,
                    LastMonthStart,
            SecondLastMonthStart,
            LastYearSameMonthStart,
            LastYearSecondLastMonthStart,
                MAX(CASE WHEN month_start = LastMonthStart THEN total_requests END) AS Last_Month_Requests,
                MAX(CASE WHEN month_start = SecondLastMonthStart THEN total_requests END) AS Second_Last_Month_Requests,
                MAX(CASE WHEN month_start = LastYearSameMonthStart THEN total_requests END) AS Last_Year_Same_Month_Requests,
                MAX(CASE WHEN month_start = LastYearSecondLastMonthStart THEN total_requests END) AS Last_Year_Second_Last_Month_Requests
            FROM MonthData
            GROUP BY account_id, account_name, industry, naics_category, industry_category, industry_vertical, industry_sub_vertical, arr,   
             LastMonthStart,
            SecondLastMonthStart,
            LastYearSameMonthStart,
            LastYearSecondLastMonthStart
        ),
        CalculatedData AS (
            SELECT 
                *,
                COALESCE(Last_Month_Requests, 0) - COALESCE(Second_Last_Month_Requests, 0) AS Current_Year_Month_Change,
                CASE 
                    WHEN COALESCE(Second_Last_Month_Requests, 0) > 0 THEN
                        (COALESCE(Last_Month_Requests, 0) - COALESCE(Second_Last_Month_Requests, 0)) / COALESCE(Second_Last_Month_Requests, 0) * 100
                    ELSE NULL
                END AS Current_Year_Month_Percentage_Change,
                COALESCE(Last_Year_Same_Month_Requests, 0) - COALESCE(Last_Year_Second_Last_Month_Requests, 0) AS Last_Year_Month_Change,
                CASE 
                    WHEN COALESCE(Last_Year_Second_Last_Month_Requests, 0) > 0 THEN
                        (COALESCE(Last_Year_Same_Month_Requests, 0) - COALESCE(Last_Year_Second_Last_Month_Requests, 0)) / COALESCE(Last_Year_Second_Last_Month_Requests, 0) * 100
                    ELSE NULL
                END AS Last_Year_Month_Percentage_Change
            FROM AggregatedData
        )
        SELECT 
            account_name,
            Current_Year_Month_Change,
            Current_Year_Month_Percentage_Change,
            Last_Year_Month_Percentage_Change,
                account_id,
            industry,
            naics_category,
            industry_category,
            industry_vertical,
            industry_sub_vertical,
            arr,
            LastMonthStart,
            SecondLastMonthStart,
            LastYearSameMonthStart,
            LastYearSecondLastMonthStart,
            Last_Month_Requests,
            Second_Last_Month_Requests,
            Last_Year_Same_Month_Requests,
            Last_Year_Second_Last_Month_Requests,
                Last_Year_Month_Change
        FROM CalculatedData
        ORDER BY Current_Year_Month_Change ASC
        LIMIT 10;
      dataFrameCell: false
      dataConnectionId: e2694948-2c20-47d3-b127-71448e2bf238
      resultVariableName: dataframe_19
      useRichDisplay: true
      sqlCellOutputType: PANDAS
      useQueryMode: false
      castDecimals: true
      useNativeDates: true
      outputFilteredResult: true
      allowDuplicateColumns: false
      tableDisplayConfig:
        pageSize: 50
        height: null
        hideIcons: false
        defaultColumnWidth: null
        hideIndex: false
        defaultSortColumn: null
        defaultSortIndexColumn: null
        defaultSortDirection: ASC
        conditionalFormatting:
          rulesets:
            - type: GRADIENT
              style: RED_WHITE
              columns:
                type: INCLUDE
                includedColumns:
                  - current_year_month_change
        calcs: null
        filters: null
        columnProperties:
          - originalName: account_id
            renameTo: null
            size: 162
            wrapText: null
            displayFormat: null
          - originalName: account_name
            renameTo: null
            size: 208
            wrapText: null
            displayFormat: null
          - originalName: arr
            renameTo: null
            size: 120
            wrapText: null
            displayFormat: null
          - originalName: current_month_requests
            renameTo: null
            size: 190
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: current_year_month_change
            renameTo: null
            size: 199
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: current_year_month_percentage_change
            renameTo: null
            size: 265
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: decline
            renameTo: null
            size: 107
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: industry
            renameTo: null
            size: 208
            wrapText: null
            displayFormat: null
          - originalName: industry_category
            renameTo: null
            size: 184
            wrapText: null
            displayFormat: null
          - originalName: industry_sub_vertical
            renameTo: null
            size: 274
            wrapText: null
            displayFormat: null
          - originalName: industry_vertical
            renameTo: null
            size: 265
            wrapText: null
            displayFormat: null
          - originalName: last_month_requests
            renameTo: null
            size: 162
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: last_year_month_change
            renameTo: null
            size: 181
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: last_year_month_percentage_change
            renameTo: null
            size: 246
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: last_year_same_month_requests
            renameTo: null
            size: 221
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: last_year_second_last_month_requests
            renameTo: null
            size: 259
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: lastmonthstart
            renameTo: null
            size: 168
            wrapText: null
            displayFormat: null
          - originalName: lastyearsamemonthstart
            renameTo: null
            size: 264
            wrapText: null
            displayFormat: null
          - originalName: lastyearsecondlastmonthstart
            renameTo: null
            size: 336
            wrapText: null
            displayFormat: null
          - originalName: naics_category
            renameTo: null
            size: 135
            wrapText: null
            displayFormat: null
          - originalName: percentage_decline
            renameTo: null
            size: 151
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: previous_month_requests
            renameTo: null
            size: 179
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: row-index-0
            renameTo: null
            size: 38
            wrapText: null
            displayFormat: null
          - originalName: second_last_month_requests
            renameTo: null
            size: 199
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: secondlastmonthstart
            renameTo: null
            size: 240
            wrapText: null
            displayFormat: null
        columnOrdering: null
        customColumnOrdering: null
        pinnedColumns: null
        hiddenColumns: null
        pinIndexColumns: false
        showAggregations: false
        columnAggregations: null
  - cellType: SQL
    cellId: 860bc163-ec07-46c6-8eb8-23a070052cb4 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      source: |-
        SELECT
            SUM(
                CASE
                    WHEN
                        date BETWEEN '2022-12-01' AND '2022-12-31'
                        THEN total_search_requests
                    ELSE 0
                END
            ) AS dec,
            SUM(
                CASE
                    WHEN
                        date BETWEEN '2022-11-01' AND '2022-11-30'
                        THEN total_search_requests
                    ELSE 0
                END
            ) AS nov
        FROM prod_usages.daily_per_application u
        LEFT JOIN prod_dimensional.dim_application a on a.public_application_id = u.application_id
        LEFT JOIN prod_dimensional.dim_account aa on aa.account_id = a.account_id
        WHERE account_name = 'Smyths Toys';
      dataFrameCell: false
      dataConnectionId: e2694948-2c20-47d3-b127-71448e2bf238
      resultVariableName: dataframe_24
      useRichDisplay: true
      sqlCellOutputType: PANDAS
      useQueryMode: false
      castDecimals: true
      useNativeDates: true
      outputFilteredResult: true
      allowDuplicateColumns: false
      tableDisplayConfig:
        pageSize: 50
        height: null
        hideIcons: false
        defaultColumnWidth: null
        hideIndex: false
        defaultSortColumn: null
        defaultSortIndexColumn: null
        defaultSortDirection: ASC
        conditionalFormatting: null
        calcs: null
        filters: null
        columnProperties:
          - originalName: dec
            renameTo: null
            size: 107
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: nov
            renameTo: null
            size: 114
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: row-index-0
            renameTo: null
            size: 38
            wrapText: null
            displayFormat: null
          - originalName: week1
            renameTo: null
            size: 107
            wrapText: null
            displayFormat: null
          - originalName: week2
            renameTo: null
            size: 114
            wrapText: null
            displayFormat: null
        columnOrdering: null
        customColumnOrdering: null
        pinnedColumns: null
        hiddenColumns: null
        pinIndexColumns: false
        showAggregations: false
        columnAggregations: null
  - cellType: SQL
    cellId: a512818f-ae93-4332-b72e-61e6e98387ca # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: Top 10 decline - Last 2 weeks
    config:
      source: |
        WITH WeekDates AS (
            SELECT 
                date_trunc('week', CURRENT_DATE) - interval '1 week' AS LastWeekStart,
                date_trunc('week', CURRENT_DATE) - interval '2 weeks' AS SecondLastWeekStart,
                date_trunc('week', CURRENT_DATE - interval '1 year') - interval '1 week' AS LastYearSameWeekStart,
                date_trunc('week', CURRENT_DATE - interval '1 year') - interval '2 weeks' AS LastYearSecondLastWeekStart
        ),
        WeekData AS (
            SELECT 
                wd.LastWeekStart,
                wd.SecondLastWeekStart,
                wd.LastYearSameWeekStart,
                wd.LastYearSecondLastWeekStart,
                d.account_id,
                d.account_name,
                d.industry,
                d.naics_category,
                d.industry_category,
                d.industry_vertical,
                d.industry_sub_vertical,
                d.arr,
                date_trunc('week', d.week) AS week_start,
                SUM(d.total_search_requests) AS total_requests
            FROM dataframe d
            CROSS JOIN WeekDates wd
            WHERE date_trunc('week', d.week) IN (wd.LastWeekStart, wd.SecondLastWeekStart, wd.LastYearSameWeekStart, wd.LastYearSecondLastWeekStart)
            AND d.churned_on IS NULL
            GROUP BY wd.LastWeekStart, wd.SecondLastWeekStart, wd.LastYearSameWeekStart, wd.LastYearSecondLastWeekStart, d.account_id, d.account_name, d.industry, d.naics_category, d.industry_category, d.industry_vertical, d.industry_sub_vertical, d.arr, week_start
        ),
        AggregatedData AS (
            SELECT 
                account_id,
                account_name,
                industry,
                naics_category,
                industry_category,
                industry_vertical,
                industry_sub_vertical,
                arr,
                LastWeekStart,
                SecondLastWeekStart,
                LastYearSameWeekStart,
                LastYearSecondLastWeekStart,
                MAX(CASE WHEN week_start = LastWeekStart THEN total_requests END) AS Last_Week_Requests,
                MAX(CASE WHEN week_start = SecondLastWeekStart THEN total_requests END) AS Second_Last_Week_Requests,
                MAX(CASE WHEN week_start = LastYearSameWeekStart THEN total_requests END) AS Last_Year_Same_Week_Requests,
                MAX(CASE WHEN week_start = LastYearSecondLastWeekStart THEN total_requests END) AS Last_Year_Second_Last_Week_Requests
            FROM WeekData
            GROUP BY account_id, account_name, industry, naics_category, industry_category, industry_vertical, industry_sub_vertical, arr,LastWeekStart,
                SecondLastWeekStart,
                LastYearSameWeekStart,
                LastYearSecondLastWeekStart
        ),
        CalculatedData AS (
            SELECT 
                *,
                COALESCE(Last_Week_Requests, 0) - COALESCE(Second_Last_Week_Requests, 0) AS Current_Year_Week_Change,
                CASE 
                    WHEN COALESCE(Second_Last_Week_Requests, 0) > 0 THEN
                        (COALESCE(Last_Week_Requests, 0) - COALESCE(Second_Last_Week_Requests, 0)) / COALESCE(Second_Last_Week_Requests, 0) * 100
                    ELSE NULL
                END AS Current_Year_Week_Percentage_Change,
                COALESCE(Last_Year_Same_Week_Requests, 0) - COALESCE(Last_Year_Second_Last_Week_Requests, 0) AS Last_Year_Week_Change,
                CASE 
                    WHEN COALESCE(Last_Year_Second_Last_Week_Requests, 0) > 0 THEN
                        (COALESCE(Last_Year_Same_Week_Requests, 0) - COALESCE(Last_Year_Second_Last_Week_Requests, 0)) / COALESCE(Last_Year_Second_Last_Week_Requests, 0) * 100
                    ELSE NULL
                END AS Last_Year_Week_Percentage_Change
            FROM AggregatedData
        )
        SELECT 
            account_name,
            Current_Year_Week_Change,
            Current_Year_Week_Percentage_Change,
            Last_Year_Week_Percentage_Change,
                account_id,
            industry,
            naics_category,
            industry_category,
            industry_vertical,
            industry_sub_vertical,
            arr,
             LastWeekStart,
                SecondLastWeekStart,
                LastYearSameWeekStart,
                LastYearSecondLastWeekStart,   Last_Week_Requests,
            Second_Last_Week_Requests,
            Last_Year_Same_Week_Requests,
            Last_Year_Second_Last_Week_Requests,
                Last_Year_Week_Change
        FROM CalculatedData
        ORDER BY Current_Year_Week_Change ASC
        LIMIT 10;
      dataFrameCell: false
      dataConnectionId: e2694948-2c20-47d3-b127-71448e2bf238
      resultVariableName: dataframe_15
      useRichDisplay: true
      sqlCellOutputType: PANDAS
      useQueryMode: false
      castDecimals: true
      useNativeDates: true
      outputFilteredResult: true
      allowDuplicateColumns: false
      tableDisplayConfig:
        pageSize: 50
        height: null
        hideIcons: false
        defaultColumnWidth: null
        hideIndex: false
        defaultSortColumn: null
        defaultSortIndexColumn: null
        defaultSortDirection: ASC
        conditionalFormatting:
          rulesets:
            - type: GRADIENT
              style: RED_WHITE
              columns:
                type: INCLUDE
                includedColumns:
                  - current_year_week_change
        calcs: null
        filters: null
        columnProperties:
          - originalName: account_id
            renameTo: null
            size: 160
            wrapText: null
            displayFormat: null
          - originalName: account_name
            renameTo: null
            size: 138
            wrapText: null
            displayFormat: null
          - originalName: arr
            renameTo: null
            size: 99
            wrapText: null
            displayFormat:
              format: CURRENCY
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: current_week_requests
            renameTo: null
            size: 183
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: current_year_week_change
            renameTo: null
            size: 181
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: current_year_week_percentage_change
            renameTo: null
            size: 254
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: decline
            renameTo: null
            size: 120
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: industry
            renameTo: null
            size: 186
            wrapText: null
            displayFormat: null
          - originalName: industry_category
            renameTo: null
            size: 153
            wrapText: null
            displayFormat: null
          - originalName: industry_sub_vertical
            renameTo: null
            size: 265
            wrapText: null
            displayFormat: null
          - originalName: industry_vertical
            renameTo: null
            size: 265
            wrapText: null
            displayFormat: null
          - originalName: last_week_requests
            renameTo: null
            size: 164
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: last_year_same_week_requests
            renameTo: null
            size: 228
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: last_year_second_last_week_requests
            renameTo: null
            size: 264
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: last_year_week_change
            renameTo: null
            size: 169
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: last_year_week_percentage_change
            renameTo: null
            size: 235
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: lastweekstart
            renameTo: null
            size: 156
            wrapText: null
            displayFormat: null
          - originalName: lastyearsameweekstart
            renameTo: null
            size: 252
            wrapText: null
            displayFormat: null
          - originalName: lastyearsecondlastweekstart
            renameTo: null
            size: 324
            wrapText: null
            displayFormat: null
          - originalName: naics_category
            renameTo: null
            size: 135
            wrapText: null
            displayFormat: null
          - originalName: percentage_decline
            renameTo: null
            size: 160
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: previous_week_requests
            renameTo: null
            size: 190
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: row-index-0
            renameTo: null
            size: 38
            wrapText: null
            displayFormat: null
          - originalName: second_last_week_requests
            renameTo: null
            size: 209
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: secondlastweekstart
            renameTo: null
            size: 228
            wrapText: null
            displayFormat: null
        columnOrdering: null
        customColumnOrdering: null
        pinnedColumns: null
        hiddenColumns: null
        pinIndexColumns: false
        showAggregations: false
        columnAggregations: null
  - cellType: SQL
    cellId: 18def9ce-9d31-40bb-aabf-45fcf88f73a1 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: Top Increases - Last 2 years
    config:
      source: |
        WITH YearDates AS (
            SELECT 
                date_trunc('year', CURRENT_DATE) - interval '1 year' AS LastYearStart,
                date_trunc('year', CURRENT_DATE) - interval '2 years' AS YearBeforeLastStart
        ),
        YearData AS (
            SELECT 
                yd.LastYearStart,
                yd.YearBeforeLastStart,
                d.account_id,
                d.account_name,
                d.industry,
                d.naics_category,
                d.industry_category,
                d.industry_vertical,
                d.industry_sub_vertical,
                d.arr,
                date_trunc('year', d.week) AS year_start,
                SUM(d.total_search_requests) AS total_requests
            FROM dataframe d
            CROSS JOIN YearDates yd
            WHERE date_trunc('year', d.week) IN (yd.LastYearStart, yd.YearBeforeLastStart)
            AND d.churned_on IS NULL
            GROUP BY yd.LastYearStart, yd.YearBeforeLastStart, d.account_id, d.account_name, d.industry, d.naics_category, d.industry_category, d.industry_vertical, d.industry_sub_vertical, d.arr, year_start
        ),
        AggregatedData AS (
            SELECT 
                account_id,
                account_name,
                industry,
                naics_category,
                industry_category,
                industry_vertical,
                industry_sub_vertical,
                arr,
                MAX(CASE WHEN year_start = LastYearStart THEN total_requests END) AS Last_Year_Requests,
                MAX(CASE WHEN year_start = YearBeforeLastStart THEN total_requests END) AS Year_Before_Last_Requests
            FROM YearData
            GROUP BY account_id, account_name, industry, naics_category, industry_category, industry_vertical, industry_sub_vertical, arr
        ),
        CalculatedData AS (
            SELECT 
                *,
                COALESCE(Last_Year_Requests, 0) - COALESCE(Year_Before_Last_Requests, 0) AS Yearly_Change,
                CASE 
                    WHEN COALESCE(Year_Before_Last_Requests, 0) > 0 THEN
                        (COALESCE(Last_Year_Requests, 0) - COALESCE(Year_Before_Last_Requests, 0)) / COALESCE(Year_Before_Last_Requests, 0) * 100
                    ELSE 0
                END AS Yearly_Percentage_Change
            FROM AggregatedData
        )
        SELECT
            account_name,
                Yearly_Change,
            Yearly_Percentage_Change,
                account_id,
            industry,
            naics_category,
            industry_category,
            industry_vertical,
            industry_sub_vertical,
            arr,
            Last_Year_Requests,
            Year_Before_Last_Requests

        FROM CalculatedData
        ORDER BY Yearly_Change DESC
        LIMIT 10;
      dataFrameCell: true
      dataConnectionId: null
      resultVariableName: dataframe_22
      useRichDisplay: true
      sqlCellOutputType: PANDAS
      useQueryMode: false
      castDecimals: true
      useNativeDates: true
      outputFilteredResult: true
      allowDuplicateColumns: false
      tableDisplayConfig:
        pageSize: 50
        height: null
        hideIcons: false
        defaultColumnWidth: null
        hideIndex: false
        defaultSortColumn: Yearly_Change
        defaultSortIndexColumn: null
        defaultSortDirection: DESC
        conditionalFormatting:
          rulesets:
            - type: GRADIENT
              style: WHITE_GREEN
              columns:
                type: INCLUDE
                includedColumns:
                  - Yearly_Change
            - type: RULES
              rules:
                - style: RED
                  expression:
                    op: EQ
                    arg: ""
              columns:
                type: INCLUDE
                includedColumns:
                  - Yearly_Change
        calcs: null
        filters: null
        columnProperties:
          - originalName: Current_Year_Change
            renameTo: null
            size: 171
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: Current_Year_Percentage_Change
            renameTo: null
            size: 240
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: Current_Year_Requests
            renameTo: null
            size: 182
            wrapText: null
            displayFormat: null
          - originalName: Last_Quarter_Requests
            renameTo: null
            size: 181
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: Last_Year_Change
            renameTo: null
            size: null
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: Last_Year_Percentage_Change
            renameTo: null
            size: 206
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: Last_Year_Requests
            renameTo: null
            size: 216
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: Last_Year_Same_Quarter_Requests
            renameTo: null
            size: 246
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: Last_Year_Second_Last_Quarter_Requests
            renameTo: null
            size: 285
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: Previous_Year_Requests
            renameTo: null
            size: 187
            wrapText: null
            displayFormat: null
          - originalName: Second_Last_Quarter_Requests
            renameTo: null
            size: 227
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: Year_Before_Last_Requests
            renameTo: null
            size: 300
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: Yearly_Change
            renameTo: null
            size: 133
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: Yearly_Percentage_Change
            renameTo: null
            size: 200
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: account_id
            renameTo: null
            size: 165
            wrapText: null
            displayFormat: null
          - originalName: account_name
            renameTo: null
            size: 204
            wrapText: null
            displayFormat: null
          - originalName: arr
            renameTo: null
            size: 120
            wrapText: null
            displayFormat:
              format: CURRENCY
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: increase
            renameTo: null
            size: 121
            wrapText: null
            displayFormat: null
          - originalName: industry
            renameTo: null
            size: 190
            wrapText: null
            displayFormat: null
          - originalName: industry_category
            renameTo: null
            size: 189
            wrapText: null
            displayFormat: null
          - originalName: industry_sub_vertical
            renameTo: null
            size: 249
            wrapText: null
            displayFormat: null
          - originalName: industry_vertical
            renameTo: null
            size: 210
            wrapText: null
            displayFormat: null
          - originalName: naics_category
            renameTo: null
            size: 135
            wrapText: null
            displayFormat: null
          - originalName: percentage_increase
            renameTo: null
            size: 167
            wrapText: null
            displayFormat: null
          - originalName: row-index-0
            renameTo: null
            size: 38
            wrapText: null
            displayFormat: null
        columnOrdering: null
        customColumnOrdering: null
        pinnedColumns: null
        hiddenColumns: null
        pinIndexColumns: false
        showAggregations: false
        columnAggregations: null
  - cellType: SQL
    cellId: c76dd4d1-ec69-4cd9-bda5-f8cdebca2e1d # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: Top Increasers Last 2 quarters
    config:
      source: |
        WITH QuarterDates AS (
            SELECT 
                date_trunc('quarter', CURRENT_DATE) - interval '3 months' AS LastQuarterStart,
                date_trunc('quarter', CURRENT_DATE) - interval '6 months' AS SecondLastQuarterStart,
                date_trunc('quarter', CURRENT_DATE) - interval '1 year' - interval '3 months' AS LastYearSameQuarterStart,
                date_trunc('quarter', CURRENT_DATE) - interval '1 year' - interval '6 months' AS LastYearSecondLastQuarterStart
        ),
        QuarterData AS (
            SELECT 
                qd.LastQuarterStart,
                qd.SecondLastQuarterStart,
                qd.LastYearSameQuarterStart,
                qd.LastYearSecondLastQuarterStart,
                d.account_id,
                d.account_name,
                d.industry,
                d.naics_category,
                d.industry_category,
                d.industry_vertical,
                d.industry_sub_vertical,
                d.arr,
                date_trunc('quarter', d.week) AS quarter_start,
                SUM(d.total_search_requests) AS total_requests
            FROM dataframe d
            CROSS JOIN QuarterDates qd
            WHERE date_trunc('quarter', d.week) IN (qd.LastQuarterStart, qd.SecondLastQuarterStart, qd.LastYearSameQuarterStart, qd.LastYearSecondLastQuarterStart)
            AND d.churned_on IS NULL
            GROUP BY qd.LastQuarterStart, qd.SecondLastQuarterStart, qd.LastYearSameQuarterStart, 
            qd.LastYearSecondLastQuarterStart, d.account_id, d.account_name, d.industry, d.naics_category, 
            d.industry_category, d.industry_vertical, d.industry_sub_vertical, d.arr, quarter_start,
            LastQuarterStart,
                SecondLastQuarterStart,
                LastYearSameQuarterStart,
                LastYearSecondLastQuarterStart
        ),
        AggregatedData AS (
            SELECT 
                account_id,
                account_name,
                industry,
                naics_category,
                industry_category,
                industry_vertical,
                industry_sub_vertical,
                arr,
                LastQuarterStart,
                SecondLastQuarterStart,
                LastYearSameQuarterStart,
                LastYearSecondLastQuarterStart,
                MAX(CASE WHEN quarter_start = LastQuarterStart THEN total_requests END) AS Last_Quarter_Requests,
                MAX(CASE WHEN quarter_start = SecondLastQuarterStart THEN total_requests END) AS Second_Last_Quarter_Requests,
                MAX(CASE WHEN quarter_start = LastYearSameQuarterStart THEN total_requests END) AS Last_Year_Same_Quarter_Requests,
                MAX(CASE WHEN quarter_start = LastYearSecondLastQuarterStart THEN total_requests END) AS Last_Year_Second_Last_Quarter_Requests
            FROM QuarterData
            GROUP BY account_id, account_name, industry, naics_category, industry_category, industry_vertical, industry_sub_vertical, arr,LastQuarterStart,
                SecondLastQuarterStart,
                LastYearSameQuarterStart,
                LastYearSecondLastQuarterStart
        ),
        CalculatedData AS (
            SELECT 
                *,
                COALESCE(Last_Quarter_Requests, 0) - COALESCE(Second_Last_Quarter_Requests, 0) AS Current_Year_Change,
                CASE 
                    WHEN COALESCE(Second_Last_Quarter_Requests, 0) > 0 THEN
                        (COALESCE(Last_Quarter_Requests, 0) - COALESCE(Second_Last_Quarter_Requests, 0)) / COALESCE(Second_Last_Quarter_Requests, 0) * 100
                    ELSE NULL
                END AS Current_Year_Percentage_Change,
                COALESCE(Last_Year_Same_Quarter_Requests, 0) - COALESCE(Last_Year_Second_Last_Quarter_Requests, 0) AS Last_Year_Change,
                CASE 
                    WHEN COALESCE(Last_Year_Second_Last_Quarter_Requests, 0) > 0 THEN
                        (COALESCE(Last_Year_Same_Quarter_Requests, 0) - COALESCE(Last_Year_Second_Last_Quarter_Requests, 0)) / COALESCE(Last_Year_Second_Last_Quarter_Requests, 0) * 100
                    ELSE NULL
                END AS Last_Year_Percentage_Change
            FROM AggregatedData
        )
        SELECT 

            account_name,
            Current_Year_Change,
            Current_Year_Percentage_Change,
            Last_Year_Percentage_Change,
                account_id,
            industry,
            naics_category,
            industry_category,
            industry_vertical,
            industry_sub_vertical,
            arr,
            LastQuarterStart,
                SecondLastQuarterStart,
                LastYearSameQuarterStart,
                LastYearSecondLastQuarterStart,
                Last_Quarter_Requests,
            Second_Last_Quarter_Requests,
            Last_Year_Same_Quarter_Requests,
            Last_Year_Second_Last_Quarter_Requests,
            Last_Year_Change
        FROM CalculatedData
        ORDER BY Current_Year_Change DESC
        LIMIT 10;
      dataFrameCell: false
      dataConnectionId: e2694948-2c20-47d3-b127-71448e2bf238
      resultVariableName: dataframe_13
      useRichDisplay: true
      sqlCellOutputType: PANDAS
      useQueryMode: false
      castDecimals: true
      useNativeDates: true
      outputFilteredResult: true
      allowDuplicateColumns: false
      tableDisplayConfig:
        pageSize: 50
        height: null
        hideIcons: false
        defaultColumnWidth: null
        hideIndex: false
        defaultSortColumn: null
        defaultSortIndexColumn: null
        defaultSortDirection: ASC
        conditionalFormatting:
          rulesets:
            - type: GRADIENT
              style: WHITE_GREEN
              columns:
                type: INCLUDE
                includedColumns:
                  - current_year_change
        calcs: null
        filters: null
        columnProperties:
          - originalName: account_id
            renameTo: null
            size: 162
            wrapText: null
            displayFormat: null
          - originalName: account_name
            renameTo: null
            size: 179
            wrapText: null
            displayFormat: null
          - originalName: arr
            renameTo: null
            size: 92
            wrapText: null
            displayFormat:
              format: CURRENCY
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: current_quarter_requests
            renameTo: null
            size: 183
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: current_year_change
            renameTo: null
            size: 168
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: current_year_percentage_change
            renameTo: null
            size: 213
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: increase
            renameTo: null
            size: 131
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: industry
            renameTo: null
            size: 209
            wrapText: null
            displayFormat: null
          - originalName: industry_category
            renameTo: null
            size: 184
            wrapText: null
            displayFormat: null
          - originalName: industry_sub_vertical
            renameTo: null
            size: 213
            wrapText: null
            displayFormat: null
          - originalName: industry_vertical
            renameTo: null
            size: 224
            wrapText: null
            displayFormat: null
          - originalName: last_quarter_requests
            renameTo: null
            size: null
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: last_year_change
            renameTo: null
            size: null
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: last_year_percentage_change
            renameTo: null
            size: 216
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: last_year_same_quarter_requests
            renameTo: null
            size: null
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: last_year_second_last_quarter_requests
            renameTo: null
            size: null
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: lastquarterstart
            renameTo: null
            size: 192
            wrapText: null
            displayFormat: null
          - originalName: naics_category
            renameTo: null
            size: 135
            wrapText: null
            displayFormat: null
          - originalName: percentage_increase
            renameTo: null
            size: 157
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: previous_quarter_requests
            renameTo: null
            size: 184
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: q3_2023
            renameTo: null
            size: null
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: q4_2023
            renameTo: null
            size: null
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: row-index-0
            renameTo: null
            size: 38
            wrapText: null
            displayFormat: null
          - originalName: second_last_quarter_requests
            renameTo: null
            size: null
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
        columnOrdering: null
        customColumnOrdering: null
        pinnedColumns: null
        hiddenColumns: null
        pinIndexColumns: false
        showAggregations: false
        columnAggregations: null
  - cellType: SQL
    cellId: b9ab544b-3cc7-45e1-8912-29d1f634c208 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: Top increase - Last 2 months
    config:
      source: |
        WITH MonthDates AS (
            SELECT 
                date_trunc('month', CURRENT_DATE) - interval '1 month' AS LastMonthStart,
                date_trunc('month', CURRENT_DATE) - interval '2 months' AS SecondLastMonthStart,
                date_trunc('month', CURRENT_DATE) - interval '1 year' - interval '1 month' AS LastYearSameMonthStart,
                date_trunc('month', CURRENT_DATE) - interval '1 year' - interval '2 months' AS LastYearSecondLastMonthStart
        ),
        MonthData AS (
            SELECT 
                md.LastMonthStart,
                md.SecondLastMonthStart,
                md.LastYearSameMonthStart,
                md.LastYearSecondLastMonthStart,
                d.account_id,
                d.account_name,
                d.industry,
                d.naics_category,
                d.industry_category,
                d.industry_vertical,
                d.industry_sub_vertical,
                d.arr,
                date_trunc('month', d.week) AS month_start,
                SUM(d.total_search_requests) AS total_requests
            FROM dataframe d
            CROSS JOIN MonthDates md
            WHERE date_trunc('month', d.week) IN (md.LastMonthStart, md.SecondLastMonthStart, md.LastYearSameMonthStart, md.LastYearSecondLastMonthStart)
            AND d.churned_on IS NULL
            GROUP BY md.LastMonthStart, md.SecondLastMonthStart, md.LastYearSameMonthStart, md.LastYearSecondLastMonthStart, d.account_id, d.account_name, d.industry, d.naics_category, d.industry_category, d.industry_vertical, d.industry_sub_vertical, d.arr, month_start
        ),
        AggregatedData AS (
            SELECT 
                account_id,
                account_name,
                industry,
                naics_category,
                industry_category,
                industry_vertical,
                industry_sub_vertical,
                arr,
                    LastMonthStart,
            SecondLastMonthStart,
            LastYearSameMonthStart,
            LastYearSecondLastMonthStart,
                MAX(CASE WHEN month_start = LastMonthStart THEN total_requests END) AS Last_Month_Requests,
                MAX(CASE WHEN month_start = SecondLastMonthStart THEN total_requests END) AS Second_Last_Month_Requests,
                MAX(CASE WHEN month_start = LastYearSameMonthStart THEN total_requests END) AS Last_Year_Same_Month_Requests,
                MAX(CASE WHEN month_start = LastYearSecondLastMonthStart THEN total_requests END) AS Last_Year_Second_Last_Month_Requests
            FROM MonthData
            GROUP BY account_id, account_name, industry, naics_category, industry_category, industry_vertical, industry_sub_vertical, arr,   
             LastMonthStart,
            SecondLastMonthStart,
            LastYearSameMonthStart,
            LastYearSecondLastMonthStart
        ),
        CalculatedData AS (
            SELECT 
                *,
                COALESCE(Last_Month_Requests, 0) - COALESCE(Second_Last_Month_Requests, 0) AS Current_Year_Month_Change,
                CASE 
                    WHEN COALESCE(Second_Last_Month_Requests, 0) > 0 THEN
                        (COALESCE(Last_Month_Requests, 0) - COALESCE(Second_Last_Month_Requests, 0)) / COALESCE(Second_Last_Month_Requests, 0) * 100
                    ELSE NULL
                END AS Current_Year_Month_Percentage_Change,
                COALESCE(Last_Year_Same_Month_Requests, 0) - COALESCE(Last_Year_Second_Last_Month_Requests, 0) AS Last_Year_Month_Change,
                CASE 
                    WHEN COALESCE(Last_Year_Second_Last_Month_Requests, 0) > 0 THEN
                        (COALESCE(Last_Year_Same_Month_Requests, 0) - COALESCE(Last_Year_Second_Last_Month_Requests, 0)) / COALESCE(Last_Year_Second_Last_Month_Requests, 0) * 100
                    ELSE NULL
                END AS Last_Year_Month_Percentage_Change
            FROM AggregatedData
        )
        SELECT 
            account_name,
            Current_Year_Month_Change,
            Current_Year_Month_Percentage_Change,
            Last_Year_Month_Percentage_Change,
                account_id,
            industry,
            naics_category,
            industry_category,
            industry_vertical,
            industry_sub_vertical,
            arr,
            LastMonthStart,
            SecondLastMonthStart,
            LastYearSameMonthStart,
            LastYearSecondLastMonthStart,
            Last_Month_Requests,
            Second_Last_Month_Requests,
            Last_Year_Same_Month_Requests,
            Last_Year_Second_Last_Month_Requests,
                Last_Year_Month_Change
        FROM CalculatedData
        ORDER BY Current_Year_Month_Change DESC
        LIMIT 10;
      dataFrameCell: false
      dataConnectionId: e2694948-2c20-47d3-b127-71448e2bf238
      resultVariableName: dataframe_20
      useRichDisplay: true
      sqlCellOutputType: PANDAS
      useQueryMode: false
      castDecimals: true
      useNativeDates: true
      outputFilteredResult: true
      allowDuplicateColumns: false
      tableDisplayConfig:
        pageSize: 50
        height: null
        hideIcons: false
        defaultColumnWidth: null
        hideIndex: false
        defaultSortColumn: null
        defaultSortIndexColumn: null
        defaultSortDirection: ASC
        conditionalFormatting:
          rulesets:
            - type: GRADIENT
              style: WHITE_GREEN
              columns:
                type: INCLUDE
                includedColumns:
                  - current_year_month_change
        calcs: null
        filters: null
        columnProperties:
          - originalName: account_id
            renameTo: null
            size: 163
            wrapText: null
            displayFormat: null
          - originalName: account_name
            renameTo: null
            size: 143
            wrapText: null
            displayFormat: null
          - originalName: arr
            renameTo: null
            size: 99
            wrapText: null
            displayFormat: null
          - originalName: current_month_requests
            renameTo: null
            size: 177
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: current_year_month_change
            renameTo: null
            size: 192
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: current_year_month_percentage_change
            renameTo: null
            size: 269
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: increase
            renameTo: null
            size: 107
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: industry
            renameTo: null
            size: 186
            wrapText: null
            displayFormat: null
          - originalName: industry_category
            renameTo: null
            size: 184
            wrapText: null
            displayFormat: null
          - originalName: industry_sub_vertical
            renameTo: null
            size: 210
            wrapText: null
            displayFormat: null
          - originalName: industry_vertical
            renameTo: null
            size: 210
            wrapText: null
            displayFormat: null
          - originalName: last_month_requests
            renameTo: null
            size: 160
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: last_year_month_change
            renameTo: null
            size: 182
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: last_year_month_percentage_change
            renameTo: null
            size: 244
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: last_year_same_month_requests
            renameTo: null
            size: 226
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: last_year_second_last_month_requests
            renameTo: null
            size: 263
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: lastmonthstart
            renameTo: null
            size: 168
            wrapText: null
            displayFormat: null
          - originalName: naics_category
            renameTo: null
            size: 135
            wrapText: null
            displayFormat: null
          - originalName: percentage_increase
            renameTo: null
            size: 167
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: previous_month_requests
            renameTo: null
            size: 181
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: row-index-0
            renameTo: null
            size: 38
            wrapText: null
            displayFormat: null
          - originalName: second_last_month_requests
            renameTo: null
            size: 223
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
        columnOrdering: null
        customColumnOrdering: null
        pinnedColumns: null
        hiddenColumns: null
        pinIndexColumns: false
        showAggregations: false
        columnAggregations: null
  - cellType: SQL
    cellId: 8921d1bc-807d-4d2d-a2b3-7018bf5dacd1 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: Top 10 Increases - Last 2 weeks
    config:
      source: |
        WITH WeekDates AS (
            SELECT 
                date_trunc('week', CURRENT_DATE) - interval '1 week' AS LastWeekStart,
                date_trunc('week', CURRENT_DATE) - interval '2 weeks' AS SecondLastWeekStart,
                date_trunc('week', CURRENT_DATE - interval '1 year') - interval '1 week' AS LastYearSameWeekStart,
                date_trunc('week', CURRENT_DATE - interval '1 year') - interval '2 weeks' AS LastYearSecondLastWeekStart
        ),
        WeekData AS (
            SELECT 
                wd.LastWeekStart,
                wd.SecondLastWeekStart,
                wd.LastYearSameWeekStart,
                wd.LastYearSecondLastWeekStart,
                d.account_id,
                d.account_name,
                d.industry,
                d.naics_category,
                d.industry_category,
                d.industry_vertical,
                d.industry_sub_vertical,
                d.arr,
                date_trunc('week', d.week) AS week_start,
                SUM(d.total_search_requests) AS total_requests
            FROM dataframe d
            CROSS JOIN WeekDates wd
            WHERE date_trunc('week', d.week) IN (wd.LastWeekStart, wd.SecondLastWeekStart, wd.LastYearSameWeekStart, wd.LastYearSecondLastWeekStart)
            AND d.churned_on IS NULL
            GROUP BY wd.LastWeekStart, wd.SecondLastWeekStart, wd.LastYearSameWeekStart, wd.LastYearSecondLastWeekStart, d.account_id, d.account_name, d.industry, d.naics_category, d.industry_category, d.industry_vertical, d.industry_sub_vertical, d.arr, week_start
        ),
        AggregatedData AS (
            SELECT 
                account_id,
                account_name,
                industry,
                naics_category,
                industry_category,
                industry_vertical,
                industry_sub_vertical,
                arr,
                LastWeekStart,
                SecondLastWeekStart,
                LastYearSameWeekStart,
                LastYearSecondLastWeekStart,
                MAX(CASE WHEN week_start = LastWeekStart THEN total_requests END) AS Last_Week_Requests,
                MAX(CASE WHEN week_start = SecondLastWeekStart THEN total_requests END) AS Second_Last_Week_Requests,
                MAX(CASE WHEN week_start = LastYearSameWeekStart THEN total_requests END) AS Last_Year_Same_Week_Requests,
                MAX(CASE WHEN week_start = LastYearSecondLastWeekStart THEN total_requests END) AS Last_Year_Second_Last_Week_Requests
            FROM WeekData
            GROUP BY account_id, account_name, industry, naics_category, industry_category, industry_vertical, industry_sub_vertical, arr,LastWeekStart,
                SecondLastWeekStart,
                LastYearSameWeekStart,
                LastYearSecondLastWeekStart
        ),
        CalculatedData AS (
            SELECT 
                *,
                COALESCE(Last_Week_Requests, 0) - COALESCE(Second_Last_Week_Requests, 0) AS Current_Year_Week_Change,
                CASE 
                    WHEN COALESCE(Second_Last_Week_Requests, 0) > 0 THEN
                        (COALESCE(Last_Week_Requests, 0) - COALESCE(Second_Last_Week_Requests, 0)) / COALESCE(Second_Last_Week_Requests, 0) * 100
                    ELSE NULL
                END AS Current_Year_Week_Percentage_Change,
                COALESCE(Last_Year_Same_Week_Requests, 0) - COALESCE(Last_Year_Second_Last_Week_Requests, 0) AS Last_Year_Week_Change,
                CASE 
                    WHEN COALESCE(Last_Year_Second_Last_Week_Requests, 0) > 0 THEN
                        (COALESCE(Last_Year_Same_Week_Requests, 0) - COALESCE(Last_Year_Second_Last_Week_Requests, 0)) / COALESCE(Last_Year_Second_Last_Week_Requests, 0) * 100
                    ELSE NULL
                END AS Last_Year_Week_Percentage_Change
            FROM AggregatedData
        )
        SELECT 
            account_name,
            Current_Year_Week_Change,
            Current_Year_Week_Percentage_Change,
            Last_Year_Week_Percentage_Change,
                account_id,
            industry,
            naics_category,
            industry_category,
            industry_vertical,
            industry_sub_vertical,
            arr,
             LastWeekStart,
                SecondLastWeekStart,
                LastYearSameWeekStart,
                LastYearSecondLastWeekStart,   Last_Week_Requests,
            Second_Last_Week_Requests,
            Last_Year_Same_Week_Requests,
            Last_Year_Second_Last_Week_Requests,
                Last_Year_Week_Change
        FROM CalculatedData
        ORDER BY Current_Year_Week_Change DESC
        LIMIT 10;
      dataFrameCell: false
      dataConnectionId: e2694948-2c20-47d3-b127-71448e2bf238
      resultVariableName: dataframe_17
      useRichDisplay: true
      sqlCellOutputType: PANDAS
      useQueryMode: false
      castDecimals: true
      useNativeDates: true
      outputFilteredResult: true
      allowDuplicateColumns: false
      tableDisplayConfig:
        pageSize: 50
        height: null
        hideIcons: false
        defaultColumnWidth: null
        hideIndex: false
        defaultSortColumn: null
        defaultSortIndexColumn: null
        defaultSortDirection: ASC
        conditionalFormatting:
          rulesets:
            - type: GRADIENT
              style: WHITE_GREEN
              columns:
                type: INCLUDE
                includedColumns:
                  - current_year_week_change
        calcs: null
        filters: null
        columnProperties:
          - originalName: account_id
            renameTo: null
            size: 164
            wrapText: null
            displayFormat: null
          - originalName: account_name
            renameTo: null
            size: 135
            wrapText: null
            displayFormat: null
          - originalName: arr
            renameTo: null
            size: 92
            wrapText: null
            displayFormat:
              format: CURRENCY
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: current_week_requests
            renameTo: null
            size: 183
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: current_year_week_change
            renameTo: null
            size: 183
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: current_year_week_percentage_change
            renameTo: null
            size: 246
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: increase
            renameTo: null
            size: 100
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: industry
            renameTo: null
            size: 186
            wrapText: null
            displayFormat: null
          - originalName: industry_category
            renameTo: null
            size: 189
            wrapText: null
            displayFormat: null
          - originalName: industry_sub_vertical
            renameTo: null
            size: 265
            wrapText: null
            displayFormat: null
          - originalName: industry_vertical
            renameTo: null
            size: 265
            wrapText: null
            displayFormat: null
          - originalName: last_week_requests
            renameTo: null
            size: 164
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: last_year_same_week_requests
            renameTo: null
            size: 210
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: last_year_second_last_week_requests
            renameTo: null
            size: 264
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: last_year_week_change
            renameTo: null
            size: null
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: last_year_week_percentage_change
            renameTo: null
            size: 248
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: lastweekstart
            renameTo: null
            size: 130
            wrapText: null
            displayFormat: null
          - originalName: naics_category
            renameTo: null
            size: 135
            wrapText: null
            displayFormat: null
          - originalName: percentage_increase
            renameTo: null
            size: 167
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: previous_week_requests
            renameTo: null
            size: 190
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
          - originalName: row-index-0
            renameTo: null
            size: 38
            wrapText: null
            displayFormat: null
          - originalName: second_last_week_requests
            renameTo: null
            size: 199
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 2
              abbreviateLargeNumbers: false
        columnOrdering: null
        customColumnOrdering: null
        pinnedColumns: null
        hiddenColumns: null
        pinIndexColumns: false
        showAggregations: false
        columnAggregations: null
  - cellType: CHARTV2
    cellId: a028ac9d-d050-40af-a0cd-d98d75da7f4c # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: WEEK on WEEK
    config:
      height: null
      chartSpec:
        type: layered
        layers:
          - id: 9293fc6b-7bfc-4a65-9e1a-c1a25e34c620
            xAxis:
              type: datetime
              style:
                grid:
                  style: solid
                ticks: {}
                labels: {}
              timeUnit: yearweek
              dataFrameColumn: week
            series:
              - id: aa6219d2-bd85-4314-8591-4b58a93ec6a8
                type: line
                axis:
                  type: number
                  style:
                    grid:
                      style: solid
                    ticks: {}
                    labels: {}
                  aggregate: sum
                dataFrameColumns:
                  - total_search_requests
                colorOrder: ascending
                color:
                  type: static
                opacity:
                  type: static
                  value: 1
                tooltip:
                  type: auto
                point: false
                stroke: solid
            dataFrame: dataframe
        settings:
          legend:
            position: right
          tooltip: true
          selectionEnabled: false
      chartSelection: {}
      colorMappings: {}
      resultVariable: filter_result
      outputResult: false
      displayType: CHART
      displayTableConfig: null
  - cellType: CHARTV2
    cellId: 8bafaa92-6982-42a7-a244-0a2d5d63ab87 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: Month on Month
    config:
      height: null
      chartSpec:
        type: layered
        layers:
          - id: 9293fc6b-7bfc-4a65-9e1a-c1a25e34c620
            xAxis:
              type: datetime
              style:
                grid:
                  style: solid
                ticks: {}
                labels: {}
              timeUnit: yearmonth
              dataFrameColumn: week
            series:
              - id: aa6219d2-bd85-4314-8591-4b58a93ec6a8
                type: line
                axis:
                  type: number
                  style:
                    grid:
                      style: solid
                    ticks: {}
                    labels: {}
                  aggregate: sum
                dataFrameColumns:
                  - total_search_requests
                colorOrder: ascending
                color:
                  type: static
                opacity:
                  type: static
                  value: 1
                tooltip:
                  type: auto
                dataLabels:
                  position: above
                point: false
                stroke: solid
            dataFrame: dataframe
        settings:
          legend:
            position: right
          tooltip: true
          selectionEnabled: false
      chartSelection: {}
      colorMappings: {}
      resultVariable: filter_result_2
      outputResult: false
      displayType: CHART
      displayTableConfig: null
  - cellType: CHARTV2
    cellId: 5c1ca339-3558-4cf9-9757-b0f756e9b57d # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: Quarterly
    config:
      height: null
      chartSpec:
        type: layered
        layers:
          - id: 9293fc6b-7bfc-4a65-9e1a-c1a25e34c620
            xAxis:
              type: datetime
              style:
                grid:
                  style: solid
                ticks: {}
                labels: {}
              timeUnit: yearquarter
              dataFrameColumn: week
            series:
              - id: aa6219d2-bd85-4314-8591-4b58a93ec6a8
                type: line
                axis:
                  type: number
                  style:
                    grid:
                      style: solid
                    ticks: {}
                    labels: {}
                  aggregate: sum
                dataFrameColumns:
                  - total_search_requests
                colorOrder: ascending
                color:
                  type: static
                opacity:
                  type: static
                  value: 1
                tooltip:
                  type: auto
                dataLabels:
                  position: above
                point: false
                stroke: solid
            dataFrame: dataframe
        settings:
          legend:
            position: right
          tooltip: true
          selectionEnabled: false
      chartSelection: {}
      colorMappings: {}
      resultVariable: filter_result_4
      outputResult: false
      displayType: CHART
      displayTableConfig: null
  - cellType: SQL
    cellId: 76f1d197-bdd1-480d-a84a-54afa3ee3a66 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      source: |2-
         select DATE_TRUNC('quarter', week) AS quarter,
            sum(total_search_requests) as total_search_requests,
            sum(total_search_operations) as total_search_operations,
            sum(total_search_requests_total) as total_search_requests_total,
            sum(total_search_operations_total) as total_search_operations_total
            from dataframe
            group by DATE_TRUNC('quarter', week)
      dataFrameCell: false
      dataConnectionId: e2694948-2c20-47d3-b127-71448e2bf238
      resultVariableName: dataframe_8
      useRichDisplay: true
      sqlCellOutputType: PANDAS
      useQueryMode: false
      castDecimals: true
      useNativeDates: true
      outputFilteredResult: true
      allowDuplicateColumns: false
      tableDisplayConfig:
        pageSize: 50
        height: null
        hideIcons: false
        defaultColumnWidth: null
        hideIndex: false
        defaultSortColumn: req_perc
        defaultSortIndexColumn: null
        defaultSortDirection: DESC
        conditionalFormatting: null
        calcs: null
        filters: null
        columnProperties:
          - originalName: industry_category
            renameTo: null
            size: 189
            wrapText: null
            displayFormat: null
          - originalName: ops_perc
            renameTo: null
            size: 171
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 4
              abbreviateLargeNumbers: false
          - originalName: quarter
            renameTo: null
            size: 195
            wrapText: null
            displayFormat: null
          - originalName: req_perc
            renameTo: null
            size: 179
            wrapText: null
            displayFormat:
              format: NUMBER
              currency: USD
              columnType: NUMBER
              numDecimalDigits: 4
              abbreviateLargeNumbers: false
          - originalName: row-index-0
            renameTo: null
            size: 46
            wrapText: null
            displayFormat: null
          - originalName: total_search_operations
            renameTo: null
            size: 186
            wrapText: null
            displayFormat: null
          - originalName: total_search_operations_total
            renameTo: null
            size: 217
            wrapText: null
            displayFormat: null
          - originalName: total_search_requests
            renameTo: null
            size: 176
            wrapText: null
            displayFormat: null
          - originalName: total_search_requests_total
            renameTo: null
            size: 207
            wrapText: null
            displayFormat: null
        columnOrdering: null
        customColumnOrdering: null
        pinnedColumns: null
        hiddenColumns: null
        pinIndexColumns: false
        showAggregations: false
        columnAggregations: null
  - cellType: CHARTV2
    cellId: 19863e63-ef67-4af8-90d1-14916f35f9ea # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      height: null
      chartSpec:
        type: layered
        layers:
          - id: 9293fc6b-7bfc-4a65-9e1a-c1a25e34c620
            xAxis:
              type: datetime
              style:
                grid:
                  style: solid
                ticks: {}
                labels: {}
              timeUnit: yearquarter
              dataFrameColumn: week
            series:
              - id: aa6219d2-bd85-4314-8591-4b58a93ec6a8
                type: line
                axis:
                  type: number
                  style:
                    grid:
                      style: solid
                    ticks: {}
                    labels: {}
                  aggregate: sum
                dataFrameColumns:
                  - total_search_requests
                colorDataFrameColumn: industry_category
                colorOrder: ascending
                color:
                  type: series
                  colorsBySeriesValues: {}
                opacity:
                  type: static
                  value: 1
                tooltip:
                  type: auto
                point: false
                stroke: solid
            dataFrame: dataframe
        settings:
          legend:
            position: right
          tooltip: true
          selectionEnabled: false
      chartSelection: {}
      colorMappings:
        "null": "#009BCB"
        Education: "#00B928"
        Healthcare: "#D4142A"
        Not Bucketed: "#003DFF"
        Retail/E-Com: "#00B928"
        IT & Software: "#009BCB"
        Leisure/Travel: "#E90A96"
        Telecommunication: "#D4142A"
        Media/Entertainement: "#5A5E9A"
        Banking/Insurance/Services: "#003DFF"
        Infrastructure/Manufacturing: "#F78125"
      resultVariable: filter_result_8
      outputResult: false
      displayType: CHART
      displayTableConfig: null
  - cellType: CHARTV2
    cellId: 82ad07f9-35a1-4d3f-9848-7bcd9b3c086f # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      height: null
      chartSpec:
        type: layered
        layers:
          - id: 9293fc6b-7bfc-4a65-9e1a-c1a25e34c620
            xAxis:
              type: datetime
              style:
                grid:
                  style: solid
                ticks: {}
                labels: {}
              timeUnit: yearquarter
              dataFrameColumn: week
            series:
              - id: aa6219d2-bd85-4314-8591-4b58a93ec6a8
                type: line
                axis:
                  type: number
                  style:
                    grid:
                      style: solid
                    ticks: {}
                    labels: {}
                  aggregate: sum
                dataFrameColumns:
                  - total_search_requests
                colorDataFrameColumn: industry_vertical
                colorOrder: ascending
                color:
                  type: series
                  colorsBySeriesValues: {}
                opacity:
                  type: static
                  value: 1
                tooltip:
                  type: auto
                point: false
                stroke: solid
            dataFrame: dataframe
        settings:
          legend:
            position: right
          tooltip: true
          selectionEnabled: false
      chartSelection: {}
      colorMappings:
        "null": "#D4142A"
        Education: "#00B928"
        Healthcare: "#D4142A"
        Not Bucketed: "#003DFF"
        Retail/E-Com: "#00B928"
        IT & Software: "#009BCB"
        Leisure/Travel: "#E90A96"
        Retail | Etail: "#5A5E9A"
        Telecommunication: "#D4142A"
        Financial Services: "#E90A96"
        Management Services: "#00B928"
        Educational Services: "#F78125"
        Information Services: "#003DFF"
        Media/Entertainement: "#5A5E9A"
        Process Manufacturing: "#009BCB"
        Discrete Manufacturing: "#009BCB"
        Health | Social Services: "#5A5E9A"
        Wholesale | Distribution: "#00B928"
        Banking/Insurance/Services: "#003DFF"
        Infrastructure/Manufacturing: "#F78125"
        Transportation | Warehousing: "#003DFF"
        Accommodation | Food Services: "#003DFF"
        Real Estate | Rental Services: "#E90A96"
        Administrative | Support Services: "#00B928"
        Other Personal | Consumer Services: "#D4142A"
        Arts | Entertainment | Recreational Services: "#D4142A"
        Professional | Scientific | Technical Services: "#F78125"
      resultVariable: filter_result_9
      outputResult: false
      displayType: CHART
      displayTableConfig: null
  - cellType: CHARTV2
    cellId: f943ea25-0b2d-420b-92f8-ddb14ce4b52a # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      height: null
      chartSpec:
        type: layered
        layers:
          - id: 9293fc6b-7bfc-4a65-9e1a-c1a25e34c620
            xAxis:
              type: datetime
              style:
                grid:
                  style: solid
                ticks: {}
                labels: {}
              timeUnit: yearquarter
              dataFrameColumn: week
            series:
              - id: aa6219d2-bd85-4314-8591-4b58a93ec6a8
                type: line
                axis:
                  type: string
                  style:
                    grid:
                      style: solid
                    ticks: {}
                    labels: {}
                  aggregate: distinct
                dataFrameColumns:
                  - account_id
                colorOrder: ascending
                color:
                  type: static
                opacity:
                  type: static
                  value: 1
                tooltip:
                  type: auto
                dataLabels:
                  position: above
                point: false
                stroke: solid
            dataFrame: dataframe
        settings:
          legend:
            position: right
          tooltip: true
          selectionEnabled: false
      chartSelection: {}
      colorMappings: {}
      resultVariable: filter_result_5
      outputResult: false
      displayType: CHART
      displayTableConfig: null
  - cellType: CHARTV2
    cellId: 9522870e-28df-426e-8f6f-3f1858103070 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: Trailing 1 year
    config:
      height: null
      chartSpec:
        type: layered
        layers:
          - id: 9293fc6b-7bfc-4a65-9e1a-c1a25e34c620
            xAxis:
              type: datetime
              style:
                grid:
                  style: solid
                ticks: {}
                labels: {}
              timeUnit: year
              dataFrameColumn: week
            series:
              - id: aa6219d2-bd85-4314-8591-4b58a93ec6a8
                type: line
                axis:
                  type: number
                  style:
                    grid:
                      style: solid
                    ticks: {}
                    labels: {}
                  aggregate: sum
                dataFrameColumns:
                  - total_search_requests
                colorOrder: ascending
                color:
                  type: static
                opacity:
                  type: static
                  value: 1
                tooltip:
                  type: auto
                dataLabels:
                  position: above
                point: false
                stroke: solid
            dataFrame: dataframe
        settings:
          legend:
            position: right
          tooltip: true
          selectionEnabled: false
      chartSelection: {}
      colorMappings: {}
      resultVariable: filter_result_3
      outputResult: false
      displayType: CHART
      displayTableConfig: null
  - cellType: SQL
    cellId: d84279d7-2b69-4787-b9bc-e7866bad638f # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      source: |-
        SELECT acc.id as account_id, acc.name as account_name, algoliaappid__c,
            closedate as signed_on , product_group__c,group_type__c, closedate, industry_category__c, company_cb_tag_summary__c
            FROM raw_salesforce.opportunitylineitem oli
            JOIN raw_salesforce.opportunity opps on oli.opportunityid = opps.id 
            JOIN raw_salesforce.account acc on acc.id = opps.accountid
            WHERE isclosed = TRUE
            AND iswon = TRUE
            AND opps.isdeleted=False
            --AND churn_date__c IS NULL
            AND product_group__c ilike '%Search%' 
            AND acc.arr__c > 0 
      dataFrameCell: false
      dataConnectionId: e2694948-2c20-47d3-b127-71448e2bf238
      resultVariableName: dataframe_6
      useRichDisplay: true
      sqlCellOutputType: PANDAS
      useQueryMode: false
      castDecimals: true
      useNativeDates: true
      outputFilteredResult: true
      allowDuplicateColumns: false
      tableDisplayConfig:
        pageSize: 50
        height: null
        hideIcons: false
        defaultColumnWidth: null
        hideIndex: false
        defaultSortColumn: null
        defaultSortIndexColumn: null
        defaultSortDirection: ASC
        conditionalFormatting: null
        calcs: null
        filters: null
        columnProperties:
          - originalName: account_id
            renameTo: null
            size: 161
            wrapText: null
            displayFormat: null
          - originalName: account_name
            renameTo: null
            size: 248
            wrapText: null
            displayFormat: null
          - originalName: algoliaappid__c
            renameTo: null
            size: 139
            wrapText: null
            displayFormat: null
          - originalName: closedate
            renameTo: null
            size: 195
            wrapText: null
            displayFormat: null
          - originalName: company_cb_tag_summary__c
            renameTo: null
            size: 217
            wrapText: null
            displayFormat: null
          - originalName: feature_name
            renameTo: null
            size: 305
            wrapText: null
            displayFormat: null
          - originalName: group_type__c
            renameTo: null
            size: 134
            wrapText: null
            displayFormat: null
          - originalName: industry_category__c
            renameTo: null
            size: 169
            wrapText: null
            displayFormat: null
          - originalName: num_accounts
            renameTo: null
            size: 134
            wrapText: null
            displayFormat: null
          - originalName: num_apps
            renameTo: null
            size: 112
            wrapText: null
            displayFormat: null
          - originalName: product_group__c
            renameTo: null
            size: 153
            wrapText: null
            displayFormat: null
          - originalName: row-index-0
            renameTo: null
            size: 46
            wrapText: null
            displayFormat: null
          - originalName: signed_on
            renameTo: null
            size: 195
            wrapText: null
            displayFormat: null
        columnOrdering: null
        customColumnOrdering: null
        pinnedColumns: null
        hiddenColumns: null
        pinIndexColumns: false
        showAggregations: false
        columnAggregations: null
  - cellType: CHARTV2
    cellId: 97edcd28-929a-49d8-9fb4-1efc9277a121 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: Oppurtunities - Quarterly
    config:
      height: null
      chartSpec:
        type: layered
        layers:
          - id: 0628df4b-fa1a-41f4-a22b-8e9f951499e5
            xAxis:
              type: datetime
              style:
                grid:
                  style: solid
                ticks: {}
                labels: {}
              timeUnit: yearquarter
              dataFrameColumn: closedate
            series:
              - id: 655f54a6-a6ff-4297-bfa1-9253c7c5c1fd
                type: bar
                axis:
                  type: string
                  style:
                    grid:
                      style: solid
                    ticks: {}
                    labels: {}
                  aggregate: distinct
                dataFrameColumns:
                  - account_id
                colorDataFrameColumn: industry_category__c
                colorOrder: ascending
                color:
                  type: series
                  colorsBySeriesValues: {}
                opacity:
                  type: static
                  value: 1
                tooltip:
                  type: auto
                barWidth: 1
                orientation: vertical
                layout: stacked
            dataFrame: dataframe_6
        settings:
          legend:
            position: right
          tooltip: true
          selectionEnabled: false
      chartSelection: {}
      colorMappings:
        "null": "#009BCB"
        Education: "#00B928"
        Healthcare: "#D4142A"
        Not Bucketed: "#003DFF"
        Retail/E-Com: "#00B928"
        IT & Software: "#009BCB"
        Leisure/Travel: "#E90A96"
        Telecommunication: "#D4142A"
        Media/Entertainement: "#5A5E9A"
        Banking/Insurance/Services: "#003DFF"
        Infrastructure/Manufacturing: "#F78125"
      resultVariable: filter_result_6
      outputResult: true
      displayType: CHART
      displayTableConfig:
        pageSize: 50
        height: null
        hideIcons: false
        defaultColumnWidth: null
        hideIndex: false
        defaultSortColumn: null
        defaultSortIndexColumn: null
        defaultSortDirection: ASC
        conditionalFormatting: null
        calcs: null
        filters:
          - column: closedate
            predicate:
              op: DATE_BETWEEN
              arg:
                - 2017-07-01
                - 2026-10-01
            columnType: DATETIME
        columnProperties: []
        columnOrdering: null
        customColumnOrdering: null
        pinnedColumns: null
        hiddenColumns: null
        pinIndexColumns: false
        showAggregations: false
        columnAggregations: null
  - cellType: SQL
    cellId: 7bfaa64c-b651-4cc1-8702-566de83f58a6 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      source: |-
        select account_id, churn_date, arr from 
        prod_dimensional.dim_account

        where churn_date IS NOT NULL
      dataFrameCell: false
      dataConnectionId: e2694948-2c20-47d3-b127-71448e2bf238
      resultVariableName: dataframe_7
      useRichDisplay: true
      sqlCellOutputType: PANDAS
      useQueryMode: false
      castDecimals: true
      useNativeDates: true
      outputFilteredResult: true
      allowDuplicateColumns: false
      tableDisplayConfig:
        pageSize: 50
        height: null
        hideIcons: false
        defaultColumnWidth: null
        hideIndex: false
        defaultSortColumn: arr__c
        defaultSortIndexColumn: null
        defaultSortDirection: DESC
        conditionalFormatting: null
        calcs: null
        filters: null
        columnProperties:
          - originalName: account_id
            renameTo: null
            size: 163
            wrapText: null
            displayFormat: null
          - originalName: arr
            renameTo: null
            size: 70
            wrapText: null
            displayFormat: null
          - originalName: arr__c
            renameTo: null
            size: 88
            wrapText: null
            displayFormat: null
          - originalName: churn_date
            renameTo: null
            size: 196
            wrapText: null
            displayFormat: null
          - originalName: churn_date__c
            renameTo: null
            size: 195
            wrapText: null
            displayFormat: null
          - originalName: id
            renameTo: null
            size: 164
            wrapText: null
            displayFormat: null
          - originalName: row-index-0
            renameTo: null
            size: 46
            wrapText: null
            displayFormat: null
        columnOrdering: null
        customColumnOrdering: null
        pinnedColumns: null
        hiddenColumns: null
        pinIndexColumns: false
        showAggregations: false
        columnAggregations: null
  - cellType: CHARTV2
    cellId: 4bd01350-de17-4695-9f6f-4f85b3e40154 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: "# CHURN "
    config:
      height: null
      chartSpec:
        type: layered
        layers:
          - id: 25a4f85c-5484-4819-a14b-19a1cf59b9eb
            xAxis:
              type: datetime
              style:
                grid:
                  style: solid
                ticks: {}
                labels: {}
              timeUnit: yearquarter
              dataFrameColumn: churn_date
            series:
              - id: 58fd06a4-bdb0-4795-8549-e0a1960f500a
                type: bar
                axis:
                  type: string
                  style:
                    grid:
                      style: solid
                    ticks: {}
                    labels: {}
                  aggregate: count
                dataFrameColumns:
                  - account_id
                colorOrder: ascending
                color:
                  type: static
                opacity:
                  type: static
                  value: 1
                tooltip:
                  type: auto
                dataLabels:
                  position: outside-end
                barWidth: 1
                orientation: vertical
                layout: grouped
            dataFrame: dataframe_7
        settings:
          legend:
            position: right
          tooltip: true
          selectionEnabled: false
      chartSelection: {}
      colorMappings: {}
      resultVariable: filter_result_7
      outputResult: false
      displayType: CHART
      displayTableConfig: null
  - cellType: MARKDOWN
    cellId: 77537efd-2b7e-41e1-9f4d-8a7dbd873c08 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      source: |-
        #### For in-depth understanding of individual features : https://app.hex.tech/ec8d7adc-d435-47ec-841b-ff2cff6432a3/app/d78bb495-e124-47b7-8a38-4e9c5ae003e9/latest
        #### Features are defined here by product owners : https://docs.google.com/spreadsheets/d/1_Sss-huG7yCAfAnYsw8Ub_FYkWxPasZKJ4eeDz5NuZc/edit?gid=590974313#gid=590974313
  - cellType: SQL
    cellId: d4bafda3-fe74-4802-8495-ce8b71235caf # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      source: |
        WITH current_data AS (
            SELECT
                feature,
                COUNT(DISTINCT CASE WHEN available IS TRUE THEN a.account_id END) AS accounts_available,
                COUNT(DISTINCT CASE WHEN activated IS TRUE THEN a.account_id END) AS accounts_activated,
                COUNT(DISTINCT CASE WHEN used IS TRUE THEN a.account_id END) AS accounts_used
            FROM prod_product.daily_adoptions AS d
            LEFT JOIN prod_dimensional.dim_application_all app 
                ON app.public_application_id = d.application_id
            LEFT JOIN prod_dimensional.dim_account a 
                ON a.account_id = app.account_id 
            WHERE d.date = current_date - 6
            GROUP BY feature
        ),
        last_month_data AS (
            SELECT
                feature,
                COUNT(DISTINCT CASE WHEN available IS TRUE THEN a.account_id END) AS accounts_available,
                COUNT(DISTINCT CASE WHEN activated IS TRUE THEN a.account_id END) AS accounts_activated,
                COUNT(DISTINCT CASE WHEN used IS TRUE THEN a.account_id END) AS accounts_used
            FROM prod_product.daily_adoptions AS d
            LEFT JOIN prod_dimensional.dim_application_all app 
                ON app.public_application_id = d.application_id
            LEFT JOIN prod_dimensional.dim_account a 
                ON a.account_id = app.account_id 
            WHERE d.date = current_date - 36
            GROUP BY feature
        ),
        last_quarter_data AS (
            SELECT
                feature,
                COUNT(DISTINCT CASE WHEN available IS TRUE THEN a.account_id END) AS accounts_available,
                COUNT(DISTINCT CASE WHEN activated IS TRUE THEN a.account_id END) AS accounts_activated,
                COUNT(DISTINCT CASE WHEN used IS TRUE THEN a.account_id END) AS accounts_used
            FROM prod_product.daily_adoptions AS d
            LEFT JOIN prod_dimensional.dim_application_all app 
                ON app.public_application_id = d.application_id
            LEFT JOIN prod_dimensional.dim_account a 
                ON a.account_id = app.account_id 
            WHERE d.date = current_date - 96
            GROUP BY feature
        ),
        last_year_data AS (
            SELECT
                feature,
                COUNT(DISTINCT CASE WHEN available IS TRUE THEN a.account_id END) AS accounts_available,
                COUNT(DISTINCT CASE WHEN activated IS TRUE THEN a.account_id END) AS accounts_activated,
                COUNT(DISTINCT CASE WHEN used IS TRUE THEN a.account_id END) AS accounts_used
            FROM prod_product.daily_adoptions AS d
            LEFT JOIN prod_dimensional.dim_application_all app 
                ON app.public_application_id = d.application_id
            LEFT JOIN prod_dimensional.dim_account a 
                ON a.account_id = app.account_id 
            WHERE d.date = current_date - 371
            GROUP BY feature
        )
        SELECT 
         c.feature,
            c.accounts_available,
            c.accounts_activated,
            c.accounts_used,
            --c.accounts_available - lm.accounts_available AS increase_decrease_last_month_available,
            --c.accounts_activated - lm.accounts_activated AS increase_decrease_last_month_activated,
            c.accounts_used -lm.accounts_used   AS increase_decrease_from_past_30_days_used,
            --c.accounts_available - lq.accounts_available AS increase_decrease_last_quarter_available,
            --c.accounts_activated - lq.accounts_activated AS increase_decrease_last_quarter_activated,
            c.accounts_used - lq.accounts_used AS increase_decrease_from_past_90_days_used,
            --c.accounts_available - ly.accounts_available AS increase_decrease_last_year_available,
            --c.accounts_activated - ly.accounts_activated AS increase_decrease_last_year_activated,
            c.accounts_used - ly.accounts_used AS increase_decrease_from_past_365_days_used
        FROM current_data c
        LEFT JOIN last_month_data lm ON c.feature = lm.feature
        LEFT JOIN last_quarter_data lq ON c.feature = lq.feature
        LEFT JOIN last_year_data ly ON c.feature = ly.feature;
      dataFrameCell: false
      dataConnectionId: e2694948-2c20-47d3-b127-71448e2bf238
      resultVariableName: dataframe_36
      useRichDisplay: true
      sqlCellOutputType: PANDAS
      useQueryMode: false
      castDecimals: true
      useNativeDates: true
      outputFilteredResult: true
      allowDuplicateColumns: false
      tableDisplayConfig:
        pageSize: 50
        height: null
        hideIcons: false
        defaultColumnWidth: null
        hideIndex: false
        defaultSortColumn: null
        defaultSortIndexColumn: null
        defaultSortDirection: ASC
        conditionalFormatting: null
        calcs: null
        filters: null
        columnProperties:
          - originalName: accounts_activated
            renameTo: null
            size: 180
            wrapText: null
            displayFormat: null
          - originalName: accounts_available
            renameTo: null
            size: 180
            wrapText: null
            displayFormat: null
          - originalName: accounts_used
            renameTo: null
            size: 130
            wrapText: null
            displayFormat: null
          - originalName: feature
            renameTo: null
            size: 120
            wrapText: null
            displayFormat: null
          - originalName: increase_decrease_from_past_30_days_used
            renameTo: null
            size: 400
            wrapText: null
            displayFormat: null
          - originalName: increase_decrease_from_past_365_days_used
            renameTo: null
            size: 400
            wrapText: null
            displayFormat: null
          - originalName: increase_decrease_from_past_90_days_used
            renameTo: null
            size: 400
            wrapText: null
            displayFormat: null
          - originalName: row-index-0
            renameTo: null
            size: 46
            wrapText: null
            displayFormat: null
        columnOrdering: null
        customColumnOrdering: null
        pinnedColumns: null
        hiddenColumns: null
        pinIndexColumns: false
        showAggregations: false
        columnAggregations: null
  - cellType: TABLE_DISPLAY
    cellId: 81df812b-b63e-4ef9-9b0d-891c5d6fd82e # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      dataFrameVariableName: dataframe_36
      resultVariable: table_result
      tableDisplayConfig:
        pageSize: 50
        height: 1053
        hideIcons: false
        defaultColumnWidth: null
        hideIndex: false
        defaultSortColumn: null
        defaultSortIndexColumn: null
        defaultSortDirection: ASC
        conditionalFormatting:
          rulesets:
            - type: RULES
              rules:
                - style: GREEN
                  expression:
                    op: GT
                    arg: "1"
                - style: RED
                  expression:
                    op: LT
                    arg: "0"
              columns:
                type: INCLUDE
                includedColumns:
                  - increase_decrease_from_past_30_days_used
                  - increase_decrease_from_past_365_days_used
                  - increase_decrease_from_past_90_days_used
        calcs: null
        filters: null
        columnProperties:
          - originalName: accounts_activated
            renameTo: null
            size: 156
            wrapText: null
            displayFormat: null
          - originalName: accounts_available
            renameTo: null
            size: 155
            wrapText: null
            displayFormat: null
          - originalName: accounts_used
            renameTo: null
            size: 133
            wrapText: null
            displayFormat: null
          - originalName: feature
            renameTo: null
            size: 305
            wrapText: false
            displayFormat: null
          - originalName: increase_decrease_from_past_30_days_used
            renameTo: null
            size: 298
            wrapText: null
            displayFormat: null
          - originalName: increase_decrease_from_past_365_days_used
            renameTo: null
            size: 306
            wrapText: null
            displayFormat: null
          - originalName: increase_decrease_from_past_90_days_used
            renameTo: null
            size: 298
            wrapText: null
            displayFormat: null
          - originalName: increase_decrease_last_month_used
            renameTo: null
            size: 252
            wrapText: null
            displayFormat: null
          - originalName: increase_decrease_last_quarter_used
            renameTo: null
            size: 256
            wrapText: null
            displayFormat: null
          - originalName: increase_decrease_last_year_used
            renameTo: null
            size: 240
            wrapText: null
            displayFormat: null
          - originalName: row-index-0
            renameTo: null
            size: 46
            wrapText: null
            displayFormat: null
        columnOrdering: null
        customColumnOrdering: null
        pinnedColumns:
          - feature
        hiddenColumns: null
        pinIndexColumns: false
        showAggregations: false
        columnAggregations: null
appLayout:
  visibleMetadataFields:
    - NAME
    - DESCRIPTION
    - AUTHOR
    - LAST_EDITED
    - LAST_RUN
    - CATEGORIES
    - STATUS
    - TABLE_OF_CONTENTS
  fullWidth: true
  tabs:
    - name: Health
      rows:
        - columns:
            - start: 0
              end: 30
              elements:
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: 2709d67c-9af8-42a3-9266-775801c2eeb3
                  sharedFilterId: null
                  height: null
                  showLabel: true
                  explorable: null
            - start: 30
              end: 60
              elements:
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: 4920d298-3a6c-4e02-9989-f7a344610f76
                  sharedFilterId: null
                  height: null
                  showLabel: true
                  explorable: null
            - start: 60
              end: 90
              elements:
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: 55c02e5b-9db1-40e3-8b02-27f6614fd21a
                  sharedFilterId: null
                  height: null
                  showLabel: true
                  explorable: null
            - start: 90
              end: 120
              elements:
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: a37622ac-1afd-4eb5-84f9-b4f456377655
                  sharedFilterId: null
                  height: null
                  showLabel: true
                  explorable: null
        - columns:
            - start: 0
              end: 60
              elements:
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: 05cfc9ab-99e2-486f-8302-ce6857c00ba4
                  sharedFilterId: null
                  height: null
                  showLabel: true
                  explorable: null
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: 7086e390-6ad8-4ec7-8ebd-7baf38bcd91c
                  sharedFilterId: null
                  height: null
                  showLabel: true
                  explorable: null
            - start: 60
              end: 120
              elements:
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: db663b55-18f4-4441-b9a6-d6d9bdb092b7
                  sharedFilterId: null
                  height: null
                  showLabel: true
                  explorable: null
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: f943ea25-0b2d-420b-92f8-ddb14ce4b52a
                  sharedFilterId: null
                  height: null
                  showLabel: true
                  explorable: null
        - columns:
            - start: 0
              end: 60
              elements:
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: 19863e63-ef67-4af8-90d1-14916f35f9ea
                  sharedFilterId: null
                  height: null
                  showLabel: true
                  explorable: null
            - start: 60
              end: 120
              elements:
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: 82ad07f9-35a1-4d3f-9848-7bcd9b3c086f
                  sharedFilterId: null
                  height: null
                  showLabel: true
                  explorable: null
        - columns:
            - start: 0
              end: 60
              elements:
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: 97edcd28-929a-49d8-9fb4-1efc9277a121
                  sharedFilterId: null
                  height: null
                  showLabel: true
                  explorable: null
            - start: 60
              end: 120
              elements:
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: 4bd01350-de17-4695-9f6f-4f85b3e40154
                  sharedFilterId: null
                  height: null
                  showLabel: true
                  explorable: null
        - columns:
            - start: 0
              end: 120
              elements:
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: f243d793-4572-4401-90c7-481cb9845818
                  sharedFilterId: null
                  height: null
                  showLabel: true
                  explorable: null
    - name: Top winners - losers
      rows:
        - columns:
            - start: 0
              end: 60
              elements:
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: 8921d1bc-807d-4d2d-a2b3-7018bf5dacd1
                  sharedFilterId: null
                  height: null
                  showLabel: true
                  explorable: null
            - start: 60
              end: 120
              elements:
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: a512818f-ae93-4332-b72e-61e6e98387ca
                  sharedFilterId: null
                  height: null
                  showLabel: true
                  explorable: null
        - columns:
            - start: 0
              end: 60
              elements:
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: b9ab544b-3cc7-45e1-8912-29d1f634c208
                  sharedFilterId: null
                  height: null
                  showLabel: true
                  explorable: null
            - start: 60
              end: 120
              elements:
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: e8308c63-bc92-4a31-b399-630c9e0a3024
                  sharedFilterId: null
                  height: null
                  showLabel: true
                  explorable: null
        - columns:
            - start: 0
              end: 60
              elements:
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: c76dd4d1-ec69-4cd9-bda5-f8cdebca2e1d
                  sharedFilterId: null
                  height: null
                  showLabel: true
                  explorable: null
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: 18def9ce-9d31-40bb-aabf-45fcf88f73a1
                  sharedFilterId: null
                  height: null
                  showLabel: true
                  explorable: null
            - start: 60
              end: 120
              elements:
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: 30934d72-d28d-4c4d-b92b-aa8d693e2b43
                  sharedFilterId: null
                  height: null
                  showLabel: true
                  explorable: null
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: db430498-d75d-4735-bc21-04103285127a
                  sharedFilterId: null
                  height: null
                  showLabel: true
                  explorable: null
    - name: Features adoptions
      rows:
        - columns:
            - start: 0
              end: 120
              elements:
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: 77537efd-2b7e-41e1-9f4d-8a7dbd873c08
                  sharedFilterId: null
                  height: null
                  showLabel: true
                  explorable: null
        - columns:
            - start: 0
              end: 120
              elements:
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: 81df812b-b63e-4ef9-9b0d-891c5d6fd82e
                  sharedFilterId: null
                  height: null
                  showLabel: true
                  explorable: null
sharedFilters: []
